{"ast":null,"code":"import axios from \"axios\";\nimport { ALL_PRODUCTS_REQUEST, ALL_PRODUCTS_SUCCESS, ALL_PRODUCTS_FAIL, CLEAR_ERRORS, PRODUCTS_DETAILS_FAIL, PRODUCTS_DETAILS_SUCCESS, PRODUCTS_DETAILS_REQUEST, NEW_REVIEW_SUCCESS, NEW_REVIEW_REQUEST, NEW_REVIEW_FAIL, ADMIN_PRODUCTS_FAIL, ADMIN_PRODUCTS_REQUEST, ADMIN_PRODUCTS_SUCCESS, NEW_PRODUCT_REQUEST, NEW_PRODUCT_SUCCESS, NEW_PRODUCT_FAIL, DELETE_PRODUCT_FAIL, DELETE_PRODUCT_SUCCESS, DELETE_PRODUCT_REQUEST, UPDATE_PRODUCT_FAIL, UPDATE_PRODUCT_REQUEST, UPDATE_PRODUCT_SUCCESS, GET_REVIEWS_REQUEST, GET_REVIEWS_SUCCESS, GET_REVIEWS_FAIL, DELETE_REVIEW_REQUEST, DELETE_REVIEW_SUCCESS, DELETE_REVIEW_RESET, DELETE_REVIEW_FAIL } from \"../constants/productConstants\";\nexport const getProducts = function () {\n  let keyword = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n  let currentPage = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  let price = arguments.length > 2 ? arguments[2] : undefined;\n  let category = arguments.length > 3 ? arguments[3] : undefined;\n  let rating = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n  return async dispatch => {\n    // console.log(\"im in get Products\");\n    // console.log(\"currentPage\",currentPage);\n    // console.log(\"keyword\",keyword);\n    // console.log(\"getcategory\",category);\n    try {\n      dispatch({\n        type: ALL_PRODUCTS_REQUEST\n      });\n      let link = `http://localhost:3001/products/getproducts?keyword=${keyword}&page=${currentPage}&price[lte]=${price[1]}&price[gte]=${price[0]}&ratings[gte]=${rating}`;\n\n      if (category) {\n        link = `http://localhost:3001/products/getproducts?keyword=${keyword}&page=${currentPage}&price[lte]=${price[1]}&price[gte]=${price[0]}&category=${category}&ratings[gte]=${rating}`;\n      }\n\n      const {\n        data\n      } = await axios.get(link);\n      console.log(\"productdata\", data);\n      dispatch({\n        type: ALL_PRODUCTS_SUCCESS,\n        payload: data\n      });\n    } catch (error) {\n      dispatch({\n        type: ALL_PRODUCTS_FAIL,\n        payload: error.response.data.errMessage\n      });\n    }\n  };\n};\nexport const getProductDetails = id => async dispatch => {\n  try {\n    // console.log(\"im in product details actions\");\n    dispatch({\n      type: PRODUCTS_DETAILS_REQUEST\n    });\n    const {\n      data\n    } = await axios.get(`http://localhost:3001/products/getproduct/${id}`);\n    console.log(\"actiondata\", data.product);\n    dispatch({\n      type: PRODUCTS_DETAILS_SUCCESS,\n      payload: data.product\n    });\n  } catch (error) {\n    dispatch({\n      type: PRODUCTS_DETAILS_FAIL,\n      payload: error.response.data.errMessage\n    });\n  }\n};\nexport const newReview = reviewData => async dispatch => {\n  // console.log(\"im in new review action\");\n  // console.log(\"reviewdata\",reviewData);\n  try {\n    // console.log(\"im in product details actions\");\n    dispatch({\n      type: NEW_REVIEW_REQUEST\n    });\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }; //   const { rating, comment, productId } = req.body;\n\n    const {\n      data\n    } = await axios.put(`http://localhost:3001/products/review`, reviewData, config); //   console.log(\"newreviewdata\",data.success);\n\n    dispatch({\n      type: NEW_REVIEW_SUCCESS,\n      payload: data.success\n    });\n  } catch (error) {\n    console.log(\"Error\", error);\n    dispatch({\n      type: NEW_REVIEW_FAIL,\n      payload: error.response.data.errMessage\n    });\n  }\n}; //get admin producrs\n\nexport const getAdminProducts = () => async dispatch => {\n  try {\n    // console.log(\"im in admin product details actions\");\n    dispatch({\n      type: ADMIN_PRODUCTS_REQUEST\n    });\n    const {\n      data\n    } = await axios.get(`http://localhost:3001/products/admin/getproducts`); //   console.log(\"actiondata\",data.product);\n\n    dispatch({\n      type: ADMIN_PRODUCTS_SUCCESS,\n      payload: data.products\n    });\n  } catch (error) {\n    dispatch({\n      type: ADMIN_PRODUCTS_FAIL,\n      payload: error.response.data.errMessage\n    });\n  }\n}; //create new product\n\nexport const newProduct = productData => async dispatch => {\n  try {\n    //    console.log(\"product data\",productData);\n    dispatch({\n      type: NEW_PRODUCT_REQUEST\n    });\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    const {\n      data\n    } = await axios.post(\"http://localhost:3001/products/admin/createProduct\", productData, config); //  console.log(\"newproductdata\",data);\n\n    dispatch({\n      type: NEW_PRODUCT_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    dispatch({\n      type: NEW_PRODUCT_FAIL,\n      payload: error.response.data.errMessage\n    });\n  }\n}; //delete product\n\nexport const deleteProduct = id => async dispatch => {\n  try {\n    //   console.log(\"im in delete product action\");\n    //   console.log(\"deletId\",id);\n    dispatch({\n      type: DELETE_PRODUCT_REQUEST\n    });\n    const {\n      data\n    } = await axios.delete(`http://localhost:3001/products/admin/deleteProduct/${id}`); //   console.log(\"newproductdata\",data);\n\n    dispatch({\n      type: DELETE_PRODUCT_SUCCESS,\n      payload: data.success\n    });\n  } catch (error) {\n    dispatch({\n      type: DELETE_PRODUCT_FAIL,\n      payload: error.response.data.errMessage\n    });\n  }\n}; //update product\n\nexport const updateProduct = (id, productData) => async dispatch => {\n  try {\n    dispatch({\n      type: UPDATE_PRODUCT_REQUEST\n    });\n    const {\n      data\n    } = await axios.put(`http://localhost:3001/products/admin/updateProduct/${id}`, productData); //   console.log(\"newproductdata\",data);\n\n    dispatch({\n      type: UPDATE_PRODUCT_SUCCESS,\n      payload: data.success\n    });\n  } catch (error) {\n    dispatch({\n      type: UPDATE_PRODUCT_FAIL,\n      payload: error.response.data.errMessage\n    });\n  }\n}; // Get product reviews\n\nexport const getProductReviews = id => async dispatch => {\n  try {\n    // console.log(\"im in review action\");\n    dispatch({\n      type: GET_REVIEWS_REQUEST\n    });\n    const {\n      data\n    } = await axios.get(`http://localhost:3001/products/reviews?id=${id}`); // console.log(\"reviewData\",data);\n\n    dispatch({\n      type: GET_REVIEWS_SUCCESS,\n      payload: data.reviews\n    });\n  } catch (error) {\n    dispatch({\n      type: GET_REVIEWS_FAIL,\n      payload: error.response.data.errMessage\n    });\n  }\n}; // Delete product review\n\nexport const deleteReview = (id, productId) => async dispatch => {\n  try {\n    dispatch({\n      type: DELETE_REVIEW_REQUEST\n    });\n    const {\n      data\n    } = await axios.delete(`http://localhost:3001/products/review?id=${id}&productId=${productId}`);\n    dispatch({\n      type: DELETE_REVIEW_SUCCESS,\n      payload: data.success\n    });\n  } catch (error) {\n    console.log(error.response);\n    dispatch({\n      type: DELETE_REVIEW_FAIL,\n      payload: error.response.data.errMessage\n    });\n  }\n}; //clear error\n\nexport const clearErrors = () => async dispatch => {\n  dispatch({\n    type: CLEAR_ERRORS\n  });\n};","map":{"version":3,"sources":["/Users/ruchikaashokbharati/Documents/Projects/Ecommerce1/Ecommerce-Backend-main/client/src/actions/productActions.js"],"names":["axios","ALL_PRODUCTS_REQUEST","ALL_PRODUCTS_SUCCESS","ALL_PRODUCTS_FAIL","CLEAR_ERRORS","PRODUCTS_DETAILS_FAIL","PRODUCTS_DETAILS_SUCCESS","PRODUCTS_DETAILS_REQUEST","NEW_REVIEW_SUCCESS","NEW_REVIEW_REQUEST","NEW_REVIEW_FAIL","ADMIN_PRODUCTS_FAIL","ADMIN_PRODUCTS_REQUEST","ADMIN_PRODUCTS_SUCCESS","NEW_PRODUCT_REQUEST","NEW_PRODUCT_SUCCESS","NEW_PRODUCT_FAIL","DELETE_PRODUCT_FAIL","DELETE_PRODUCT_SUCCESS","DELETE_PRODUCT_REQUEST","UPDATE_PRODUCT_FAIL","UPDATE_PRODUCT_REQUEST","UPDATE_PRODUCT_SUCCESS","GET_REVIEWS_REQUEST","GET_REVIEWS_SUCCESS","GET_REVIEWS_FAIL","DELETE_REVIEW_REQUEST","DELETE_REVIEW_SUCCESS","DELETE_REVIEW_RESET","DELETE_REVIEW_FAIL","getProducts","keyword","currentPage","price","category","rating","dispatch","type","link","data","get","console","log","payload","error","response","errMessage","getProductDetails","id","product","newReview","reviewData","config","headers","put","success","getAdminProducts","products","newProduct","productData","post","deleteProduct","delete","updateProduct","getProductReviews","reviews","deleteReview","productId","clearErrors"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport {ALL_PRODUCTS_REQUEST,ALL_PRODUCTS_SUCCESS,ALL_PRODUCTS_FAIL,CLEAR_ERRORS,PRODUCTS_DETAILS_FAIL,PRODUCTS_DETAILS_SUCCESS,PRODUCTS_DETAILS_REQUEST,NEW_REVIEW_SUCCESS,NEW_REVIEW_REQUEST,NEW_REVIEW_FAIL,ADMIN_PRODUCTS_FAIL,ADMIN_PRODUCTS_REQUEST,ADMIN_PRODUCTS_SUCCESS, NEW_PRODUCT_REQUEST, NEW_PRODUCT_SUCCESS, NEW_PRODUCT_FAIL,DELETE_PRODUCT_FAIL,DELETE_PRODUCT_SUCCESS,DELETE_PRODUCT_REQUEST,UPDATE_PRODUCT_FAIL,UPDATE_PRODUCT_REQUEST,UPDATE_PRODUCT_SUCCESS,GET_REVIEWS_REQUEST,GET_REVIEWS_SUCCESS,GET_REVIEWS_FAIL,DELETE_REVIEW_REQUEST,DELETE_REVIEW_SUCCESS,DELETE_REVIEW_RESET,DELETE_REVIEW_FAIL} from \"../constants/productConstants\";\nexport const getProducts = (keyword=\"\",currentPage=1,price,category,rating=0)=>async (dispatch)=>{\n    // console.log(\"im in get Products\");\n    // console.log(\"currentPage\",currentPage);\n    // console.log(\"keyword\",keyword);\n    // console.log(\"getcategory\",category);\n    try{\n      dispatch({type:ALL_PRODUCTS_REQUEST})\n      let link = `http://localhost:3001/products/getproducts?keyword=${keyword}&page=${currentPage}&price[lte]=${price[1]}&price[gte]=${price[0]}&ratings[gte]=${rating}`;\n      if(category){\n        link = `http://localhost:3001/products/getproducts?keyword=${keyword}&page=${currentPage}&price[lte]=${price[1]}&price[gte]=${price[0]}&category=${category}&ratings[gte]=${rating}`\n      }\n      const {data} = await axios.get(link);\n      console.log(\"productdata\",data);\n      dispatch({\n          type:ALL_PRODUCTS_SUCCESS,\n          payload:data\n      })\n    }catch(error){\n        dispatch({\n            type:ALL_PRODUCTS_FAIL,\n            payload:error.response.data.errMessage\n        })\n    }\n}\n\nexport const getProductDetails = (id)=>async (dispatch)=>{\n    try{\n        // console.log(\"im in product details actions\");\n      dispatch({type:PRODUCTS_DETAILS_REQUEST})\n      const {data} = await axios.get(`http://localhost:3001/products/getproduct/${id}`);\n      console.log(\"actiondata\",data.product);\n      dispatch({\n          type:PRODUCTS_DETAILS_SUCCESS,\n          payload:data.product\n      })\n    }catch(error){\n        dispatch({\n            type:PRODUCTS_DETAILS_FAIL,\n            payload:error.response.data.errMessage\n        })\n    }\n}\n\nexport const newReview = (reviewData)=>async (dispatch)=>{\n    // console.log(\"im in new review action\");\n    // console.log(\"reviewdata\",reviewData);\n    try{\n        // console.log(\"im in product details actions\");\n      dispatch({type:NEW_REVIEW_REQUEST})\n      const config={\n        headers:{\n            'Content-Type':'application/json'\n        }\n      }\n    //   const { rating, comment, productId } = req.body;\n      const {data} = await axios.put(`http://localhost:3001/products/review`,reviewData,config);\n    //   console.log(\"newreviewdata\",data.success);\n      dispatch({\n          type:NEW_REVIEW_SUCCESS,\n          payload:data.success\n      })\n    }catch(error){\n        console.log(\"Error\",error);\n        dispatch({\n            type:NEW_REVIEW_FAIL,\n            payload:error.response.data.errMessage\n        })\n    }\n}\n\n//get admin producrs\nexport const getAdminProducts = ()=>async (dispatch)=>{\n    try{\n        // console.log(\"im in admin product details actions\");\n      dispatch({type:ADMIN_PRODUCTS_REQUEST})\n      const {data} = await axios.get(`http://localhost:3001/products/admin/getproducts`);\n    //   console.log(\"actiondata\",data.product);\n      dispatch({\n          type:ADMIN_PRODUCTS_SUCCESS,\n          payload:data.products\n      })\n    }catch(error){\n        dispatch({\n            type:ADMIN_PRODUCTS_FAIL,\n            payload:error.response.data.errMessage\n        })\n    }\n}\n\n//create new product\nexport const newProduct = (productData)=>async(dispatch)=>{\n   try{\n    //    console.log(\"product data\",productData);\n     dispatch({type:NEW_PRODUCT_REQUEST});\n     const config={\n        headers:{\n            'Content-Type':'application/json'\n        }\n      }\n     const {data} = await axios.post(\"http://localhost:3001/products/admin/createProduct\",productData,config);\n    //  console.log(\"newproductdata\",data);\n     dispatch({type:NEW_PRODUCT_SUCCESS, payload: data})\n   }catch(error){\n      dispatch({type:NEW_PRODUCT_FAIL,payload: error.response.data.errMessage})\n   }\n}\n\n//delete product\nexport const deleteProduct = (id)=>async(dispatch)=>{\n    try{\n    //   console.log(\"im in delete product action\");\n    //   console.log(\"deletId\",id);\n      dispatch({type:DELETE_PRODUCT_REQUEST});\n     \n      const {data} = await axios.delete(`http://localhost:3001/products/admin/deleteProduct/${id}`);\n    //   console.log(\"newproductdata\",data);\n      dispatch({type:DELETE_PRODUCT_SUCCESS, payload: data.success})\n    }catch(error){\n       dispatch({type:DELETE_PRODUCT_FAIL,payload: error.response.data.errMessage})\n    }\n }\n\n //update product\n export const updateProduct = (id,productData)=>async(dispatch)=>{\n    try{\n        \n      dispatch({type:UPDATE_PRODUCT_REQUEST});\n     \n      const {data} = await axios.put(`http://localhost:3001/products/admin/updateProduct/${id}`,productData);\n    //   console.log(\"newproductdata\",data);\n      dispatch({type:UPDATE_PRODUCT_SUCCESS, payload: data.success})\n    }catch(error){\n       dispatch({type:UPDATE_PRODUCT_FAIL,payload: error.response.data.errMessage})\n    }\n }\n\n // Get product reviews\nexport const getProductReviews = (id) => async (dispatch) => {\n    try {\n        // console.log(\"im in review action\");\n        dispatch({ type: GET_REVIEWS_REQUEST })\n\n        const { data } = await axios.get(`http://localhost:3001/products/reviews?id=${id}`)\n        // console.log(\"reviewData\",data);\n        dispatch({\n            type: GET_REVIEWS_SUCCESS,\n            payload: data.reviews\n        })\n\n    } catch (error) {\n\n        dispatch({\n            type: GET_REVIEWS_FAIL,\n            payload:error.response.data.errMessage\n        })\n    }\n}\n\n// Delete product review\nexport const deleteReview = (id, productId) => async (dispatch) => {\n    try {\n\n        dispatch({ type: DELETE_REVIEW_REQUEST })\n\n        const { data } = await axios.delete(`http://localhost:3001/products/review?id=${id}&productId=${productId}`)\n\n        dispatch({\n            type: DELETE_REVIEW_SUCCESS,\n            payload: data.success\n        })\n\n    } catch (error) {\n\n        console.log(error.response);\n\n        dispatch({\n            type: DELETE_REVIEW_FAIL,\n            payload:error.response.data.errMessage\n        })\n    }\n}\n\n//clear error\nexport const clearErrors = ()=>async(dispatch)=>{\n   dispatch({\n       type:CLEAR_ERRORS\n   })\n}"]},"metadata":{},"sourceType":"module"}