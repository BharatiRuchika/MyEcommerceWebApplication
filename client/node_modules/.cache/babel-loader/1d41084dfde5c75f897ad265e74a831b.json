{"ast":null,"code":"import React,{useState,useEffect}from'react';import Loader from\"../layouts/loader\";import MetaData from'../layouts/MetaData';import{useAlert}from'react-alert';import{useDispatch,useSelector}from'react-redux';import{getAllOrders,clearErrors,deleteOrder}from'../../actions/orderActions';import{Link}from'react-router-dom';import Sidebar from'./Sidebar';import{MDBDataTable}from'mdbreact';import{DELETE_ORDER_RESET}from'../../constants/orderConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var OrderList=function OrderList(_ref){var history=_ref.history;var alert=useAlert();var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.allOrder;}),loading=_useSelector.loading,error=_useSelector.error,orders=_useSelector.orders;var _useSelector2=useSelector(function(state){return state.updateOrder;}),isDeleted=_useSelector2.isDeleted;var _useSelector3=useSelector(function(state){return state.auth;}),token=_useSelector3.token;useEffect(function(){// console.log(\"im in useEffect\");\ndispatch(getAllOrders(token));if(error){alert.error(error);dispatch(clearErrors());}// console.log(\"isDeleted\",isDeleted);\nif(isDeleted){alert.success('Order deleted successfully');history.push('/admin/orders');dispatch({type:DELETE_ORDER_RESET});}},[error,alert,dispatch,isDeleted,history]);var deleteOrderHandler=function deleteOrderHandler(id){dispatch(deleteOrder(id,token));};var setOrders=function setOrders(){var data={columns:[{label:'order ID',field:'id',sort:'asc'},{label:'Num of Items',field:'numOfItems',sort:'asc'},{label:'Amount',field:'amount',sort:'asc'},{label:'Status',field:'status',sort:'asc'},{label:'Actions',field:'actions'}],rows:[]};orders.forEach(function(order){data.rows.push({id:order._id,numOfItems:order.orderItems.length,amount:\"$\".concat(order.totalPrice),status:order.orderStatus&&String(order.orderStatus).includes(\"Delivered\")?/*#__PURE__*/_jsx(\"p\",{style:{color:\"green\"},children:order.orderStatus}):/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:order.orderStatus}),actions:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/admin/order/\".concat(order._id),className:\"btn btn-primary\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-eye\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return deleteOrderHandler(order._id);},className:\"btn btn-danger py-1 px-2 ml-2\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-trash\"})})]})});});return data;};// const deleteProductHandler=(id)=>{\n//    dispatch(deleteProduct(id));\n// }\nreturn/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:\"All Orders\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-2\",children:/*#__PURE__*/_jsx(Sidebar,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-10\",children:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"my-5\",children:\"All Orders\"}),loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(MDBDataTable,{data:setOrders(),className:\"px-3\",bordered:true,striped:true,hover:true})})]})})]})]});};export default OrderList;","map":{"version":3,"sources":["/Users/ruchikaashokbharati/Documents/Projects/Ecommerce/Ecommerce-Backend-main/client/src/components/admin/OrderList.js"],"names":["React","useState","useEffect","Loader","MetaData","useAlert","useDispatch","useSelector","getAllOrders","clearErrors","deleteOrder","Link","Sidebar","MDBDataTable","DELETE_ORDER_RESET","OrderList","history","alert","dispatch","state","allOrder","loading","error","orders","updateOrder","isDeleted","auth","token","success","push","type","deleteOrderHandler","id","setOrders","data","columns","label","field","sort","rows","forEach","order","_id","numOfItems","orderItems","length","amount","totalPrice","status","orderStatus","String","includes","color","actions"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react'\nimport Loader from \"../layouts/loader\";\nimport MetaData from '../layouts/MetaData';\nimport { useAlert } from 'react-alert';\nimport { useDispatch,useSelector } from 'react-redux';\nimport { getAllOrders,clearErrors,deleteOrder } from '../../actions/orderActions';\nimport { Link } from 'react-router-dom';\nimport Sidebar from './Sidebar';\nimport { MDBDataTable } from 'mdbreact'\nimport { DELETE_ORDER_RESET } from '../../constants/orderConstants';\n\nconst OrderList = ({history}) => {\n    const alert = useAlert();\n    const dispatch = useDispatch();\n    const {loading,error,orders} = useSelector(state=>state.allOrder)\n \n    const { isDeleted } = useSelector(state => state.updateOrder)\n    const { token } = useSelector(state => state.auth);\n    useEffect(() => {\n        // console.log(\"im in useEffect\");\n       dispatch(getAllOrders(token))\n       if(error){\n        alert.error(error);\n        dispatch(clearErrors());\n    }\n    // console.log(\"isDeleted\",isDeleted);\n    if (isDeleted) {\n       \n        alert.success('Order deleted successfully');\n        history.push('/admin/orders');\n        dispatch({ type: DELETE_ORDER_RESET })\n    }\n}, [error,alert,dispatch,isDeleted,history])\nconst deleteOrderHandler = (id) => {\n    dispatch(deleteOrder(id,token))\n}\n    const setOrders = ()=>{\n      const data = {\n          columns:[\n              {\n                  label:'order ID',\n                  field:'id',\n                  sort:'asc'\n              },{\n                  label:'Num of Items',\n                  field:'numOfItems',\n                  sort:'asc'\n              },{\n                label:'Amount',\n                field:'amount',\n                sort:'asc'\n            },\n            {\n                label:'Status',\n                field:'status',\n                sort:'asc'\n            },\n            {\n                label:'Actions',\n                field:'actions',\n                \n            }\n          ],\n          rows:[\n\n          ]\n        }\n        orders.forEach(order=>{\n            data.rows.push({\n                id:order._id,\n                numOfItems:order.orderItems.length,\n                amount:`$${order.totalPrice}`,\n               \n                status:order.orderStatus && String(order.orderStatus).includes(\"Delivered\")?\n                <p style={{color:\"green\"}}>{order.orderStatus}</p>:\n                <p style={{color:\"red\"}}>{order.orderStatus}</p>,\n                actions:<><Link to={`/admin/order/${order._id}`} className=\"btn btn-primary\">\n                    <i className=\"fa fa-eye\"></i>\n                </Link>\n                <button onClick={() => deleteOrderHandler(order._id)} className=\"btn btn-danger py-1 px-2 ml-2\">\n                <i className=\"fa fa-trash\"></i>    \n                </button></>\n            })\n        })\n        return data;\n    }\n    // const deleteProductHandler=(id)=>{\n    //    dispatch(deleteProduct(id));\n    // }\n    return (\n        <>\n        <MetaData title={\"All Orders\"}></MetaData>\n        <div className=\"row\">\n          <div className=\"col-12 col-md-2\">\n              <Sidebar/>\n          </div>\n          <div className=\"col-12 col-md-10\">\n                <>\n                <h1 className=\"my-5\">All Orders</h1>\n                {loading?<Loader/>:<>\n                 <MDBDataTable\n         data={setOrders()}\n         className=\"px-3\"\n         bordered\n         striped\n         hover\n     />\n                </>}\n                </>\n          </div>\n        </div>\n        </>\n    )\n}\n\nexport default OrderList\n"]},"metadata":{},"sourceType":"module"}