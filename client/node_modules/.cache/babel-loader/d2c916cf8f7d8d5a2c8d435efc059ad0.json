{"ast":null,"code":"import { LOGIN_REQUEST, LOGIN_SUCCESS, LOGIN_FAIL, CLEAR_ERRORS, REGISTER_USER_FAIL, REGISTER_USER_SUCCESS, REGISTER_USER_REQUEST, LOAD_USER_FAIL, LOAD_USER_REQUEST, LOAD_USER_SUCCESS, LOGOUT_FAIL, LOGOUT_SUCCESS, UPDATE_PASSWORD_FAIL, UPDATE_PROFILE_SUCCESS, UPDATE_PASSWORD_REQUEST, UPDATE_PASSWORD_SUCCESS, UPDATE_PROFILE_FAIL, UPDATE_PROFILE_REQUEST, FORGOT_PASSWORD_FAIL, FORGOT_PASSWORD_REQUEST, FORGOT_PASSWORD_SUCCESS, NEW_PASSWORD_FAIL, NEW_PASSWORD_REQUEST, NEW_PASSWORD_SUCCESS, ALL_USERS_SUCCESS, ALL_USERS_REQUEST, ALL_USERS_FAIL, UPDATE_USER_SUCCESS, UPDATE_USER_REQUEST, UPDATE_USER_FAIL, USER_DETAILS_REQUEST, USER_DETAILS_SUCCESS, USER_DETAILS_FAIL, DELETE_USER_FAIL, DELETE_USER_REQUEST, DELETE_USER_SUCCESS } from \"../constants/userConstants\";\nimport { getStripeData } from '../actions/stripeActions';\nimport axios from \"axios\"; //login\n\nexport const login = (email, password) => async dispatch => {\n  console.log(\"im in login\");\n\n  try {\n    dispatch({\n      type: LOGIN_REQUEST\n    });\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    const {\n      data\n    } = await axios.post(\"http://localhost:3001/auth/login\", {\n      email,\n      password\n    }, config);\n    console.log(\"loginuserdata\", data);\n    dispatch({\n      type: LOGIN_SUCCESS,\n      payload: data.user\n    });\n    dispatch({\n      type: GLOBALTYPES.AUTH,\n      payload: {\n        token: res.data.access_token,\n        user: res.data.user\n      }\n    });\n    dispatch(getStripeData());\n  } catch (error) {\n    console.log(\"im in login catch\");\n    console.log(\"error\", error.response.data.errMessage);\n    dispatch({\n      type: LOGIN_FAIL,\n      payload: error.response.data.errMessage\n    });\n  }\n}; //register user\n\nexport const register = userData => async dispatch => {\n  console.log(\"im in register\");\n\n  try {\n    dispatch({\n      type: REGISTER_USER_REQUEST\n    });\n    const config = {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    };\n    const {\n      data\n    } = await axios.post(\"http://localhost:3001/auth/register\", userData, config);\n    console.log(\"registerdata\", data);\n    dispatch({\n      type: REGISTER_USER_SUCCESS,\n      payload: data.user\n    });\n  } catch (error) {\n    console.log(\"error\", error.response);\n    dispatch({\n      type: REGISTER_USER_FAIL,\n      payload: error.response.data.errMessage\n    });\n  }\n}; //load user\n\nexport const loadUser = () => async dispatch => {\n  console.log(\"im in load user\");\n\n  try {\n    dispatch({\n      type: LOAD_USER_REQUEST\n    });\n    const {\n      data\n    } = await axios.get(\"http://localhost:3001/auth/me\");\n    console.log(\"loaduserdata\", data); //  console.log(\"stripeApiKey\",stripeApiKey);\n    //  const {stripeData} = await axios.get(\"http://localhost:3001/user/payment/stripeApi\");\n    //  console.log(\"stripeData\",stripeData)\n    //  setStripeApiKey(stripeData.stripeApiKey);\n\n    dispatch({\n      type: LOAD_USER_SUCCESS,\n      payload: data.user\n    }); // }\n  } catch (error) {\n    console.log(\"Error\", error);\n    dispatch({\n      type: LOAD_USER_FAIL,\n      payload: error.response.data.errMessage\n    });\n  }\n}; //logout user\n\nexport const logoutUser = () => async dispatch => {\n  console.log(\"im in load user\");\n\n  try {\n    const {\n      data\n    } = await axios.get(\"http://localhost:3001/auth/logout\");\n    console.log(\"logoutuserdata\", data);\n    dispatch({\n      type: LOGOUT_SUCCESS\n    });\n  } catch (error) {\n    console.log(\"logouterrpr\", error);\n    dispatch({\n      type: LOGOUT_FAIL,\n      payload: error.response.data.errMessage\n    });\n  }\n}; //register user\n\nexport const updateProfile = userData => async dispatch => {\n  console.log(\"im in register\");\n\n  try {\n    dispatch({\n      type: UPDATE_PROFILE_REQUEST\n    });\n    const config = {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    };\n    const {\n      data\n    } = await axios.put(\"http://localhost:3001/auth/me/update\", userData, config);\n    console.log(\"userdata\", data);\n    dispatch({\n      type: UPDATE_PROFILE_SUCCESS,\n      payload: data.success\n    });\n  } catch (error) {\n    dispatch({\n      type: UPDATE_PROFILE_FAIL,\n      payload: error.response.data.errMessage\n    });\n  }\n}; //update password\n\nexport const updatePassword = passwords => async dispatch => {\n  console.log(\"im in update password\");\n\n  try {\n    dispatch({\n      type: UPDATE_PASSWORD_REQUEST\n    });\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    const {\n      data\n    } = await axios.put(\"http://localhost:3001/auth/password/updatepassword\", passwords, config);\n    console.log(\"userdata\", data);\n    dispatch({\n      type: UPDATE_PASSWORD_SUCCESS,\n      payload: data.success\n    });\n  } catch (error) {\n    console.log(\"error\", error.response);\n    dispatch({\n      type: UPDATE_PASSWORD_FAIL,\n      payload: error.response.data.errMessage\n    });\n  }\n}; //reset password\n\nexport const resetPassword = (token, passwords) => async dispatch => {\n  console.log(\"im in new password\");\n\n  try {\n    dispatch({\n      type: NEW_PASSWORD_REQUEST\n    });\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    const {\n      data\n    } = await axios.put(`http://localhost:3001/auth/password/reset/${token}`, passwords, config);\n    console.log(\"userdata\", data);\n    dispatch({\n      type: NEW_PASSWORD_SUCCESS,\n      payload: data.success\n    });\n  } catch (error) {\n    console.log(\"error\", error.response);\n    dispatch({\n      type: NEW_PASSWORD_FAIL,\n      payload: error.response.data.errMessage\n    });\n  }\n}; //forgot password\n\nexport const forgotPassword = email => async dispatch => {\n  console.log(\"im in forgot password\");\n  console.log(\"email\", email);\n\n  try {\n    dispatch({\n      type: FORGOT_PASSWORD_REQUEST\n    });\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    const {\n      data\n    } = await axios.post(\"http://localhost:3001/auth/password/forgot\", email, config);\n    console.log(\"userdata\", data);\n    dispatch({\n      type: FORGOT_PASSWORD_SUCCESS,\n      payload: data.message\n    });\n  } catch (error) {\n    console.log(\"error\", error.response);\n    dispatch({\n      type: FORGOT_PASSWORD_FAIL,\n      payload: error.response.data.errMessage\n    });\n  }\n};\nexport const getAllUsers = () => async dispatch => {\n  console.log(\"im in get users\");\n\n  try {\n    dispatch({\n      type: ALL_USERS_REQUEST\n    });\n    const {\n      data\n    } = await axios.get(\"http://localhost:3001/auth/admin/users\");\n    console.log(\"Allusersdata\", data);\n    dispatch({\n      type: ALL_USERS_SUCCESS,\n      payload: data.users\n    }); // }\n  } catch (error) {\n    console.log(\"im in cathc\");\n    console.log(\"error\", error);\n    dispatch({\n      type: ALL_USERS_FAIL,\n      payload: error.response.data.errMessage\n    });\n  }\n};\nexport const updateUser = (id, userData) => async dispatch => {\n  try {\n    dispatch({\n      type: UPDATE_USER_REQUEST\n    });\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    const {\n      data\n    } = await axios.put(`http://localhost:3001/auth/admin/user/${id}`, userData, config);\n    dispatch({\n      type: UPDATE_USER_SUCCESS,\n      payload: data.success\n    });\n  } catch (error) {\n    dispatch({\n      type: UPDATE_USER_FAIL,\n      payload: error.response.data.errMessage\n    });\n  }\n};\nexport const getUserDetails = id => async dispatch => {\n  try {\n    dispatch({\n      type: USER_DETAILS_REQUEST\n    });\n    const {\n      data\n    } = await axios.get(`http://localhost:3001/auth/admin/user/${id}`);\n    dispatch({\n      type: USER_DETAILS_SUCCESS,\n      payload: data.user\n    });\n  } catch (error) {\n    dispatch({\n      type: USER_DETAILS_FAIL,\n      payload: error.response.data.errMessage\n    });\n  }\n}; // Delete user - ADMIN\n\nexport const deleteUser = id => async dispatch => {\n  console.log(\"im in delete user\");\n  console.log(\"id\", id);\n\n  try {\n    dispatch({\n      type: DELETE_USER_REQUEST\n    });\n    const {\n      data\n    } = await axios.delete(`http://localhost:3001/auth/admin/user/${id}`);\n    console.log(\"deleteData\", data);\n    dispatch({\n      type: DELETE_USER_SUCCESS,\n      payload: data.success\n    });\n  } catch (error) {\n    dispatch({\n      type: DELETE_USER_FAIL,\n      payload: error.response.data.errMessage\n    });\n  }\n}; //clear error\n\nexport const clearErrors = () => async dispatch => {\n  dispatch({\n    type: CLEAR_ERRORS\n  });\n};","map":{"version":3,"sources":["/Users/ruchikaashokbharati/Documents/Projects/Ecommerce1/Ecommerce-Backend-main/client/src/actions/userActions.js"],"names":["LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_FAIL","CLEAR_ERRORS","REGISTER_USER_FAIL","REGISTER_USER_SUCCESS","REGISTER_USER_REQUEST","LOAD_USER_FAIL","LOAD_USER_REQUEST","LOAD_USER_SUCCESS","LOGOUT_FAIL","LOGOUT_SUCCESS","UPDATE_PASSWORD_FAIL","UPDATE_PROFILE_SUCCESS","UPDATE_PASSWORD_REQUEST","UPDATE_PASSWORD_SUCCESS","UPDATE_PROFILE_FAIL","UPDATE_PROFILE_REQUEST","FORGOT_PASSWORD_FAIL","FORGOT_PASSWORD_REQUEST","FORGOT_PASSWORD_SUCCESS","NEW_PASSWORD_FAIL","NEW_PASSWORD_REQUEST","NEW_PASSWORD_SUCCESS","ALL_USERS_SUCCESS","ALL_USERS_REQUEST","ALL_USERS_FAIL","UPDATE_USER_SUCCESS","UPDATE_USER_REQUEST","UPDATE_USER_FAIL","USER_DETAILS_REQUEST","USER_DETAILS_SUCCESS","USER_DETAILS_FAIL","DELETE_USER_FAIL","DELETE_USER_REQUEST","DELETE_USER_SUCCESS","getStripeData","axios","login","email","password","dispatch","console","log","type","config","headers","data","post","payload","user","GLOBALTYPES","AUTH","token","res","access_token","error","response","errMessage","register","userData","loadUser","get","logoutUser","updateProfile","put","success","updatePassword","passwords","resetPassword","forgotPassword","message","getAllUsers","users","updateUser","id","getUserDetails","deleteUser","delete","clearErrors"],"mappings":"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","sourcesContent":["import {LOGIN_REQUEST,LOGIN_SUCCESS,LOGIN_FAIL,CLEAR_ERRORS,REGISTER_USER_FAIL,REGISTER_USER_SUCCESS,REGISTER_USER_REQUEST,\nLOAD_USER_FAIL,LOAD_USER_REQUEST,LOAD_USER_SUCCESS,LOGOUT_FAIL,LOGOUT_SUCCESS,\nUPDATE_PASSWORD_FAIL,UPDATE_PROFILE_SUCCESS,UPDATE_PASSWORD_REQUEST,UPDATE_PASSWORD_SUCCESS,UPDATE_PROFILE_FAIL,UPDATE_PROFILE_REQUEST,\nFORGOT_PASSWORD_FAIL,\nFORGOT_PASSWORD_REQUEST,\nFORGOT_PASSWORD_SUCCESS,\nNEW_PASSWORD_FAIL,\nNEW_PASSWORD_REQUEST,\nNEW_PASSWORD_SUCCESS,\nALL_USERS_SUCCESS,\nALL_USERS_REQUEST,\nALL_USERS_FAIL,\nUPDATE_USER_SUCCESS,\nUPDATE_USER_REQUEST,\nUPDATE_USER_FAIL,\nUSER_DETAILS_REQUEST,\nUSER_DETAILS_SUCCESS,\nUSER_DETAILS_FAIL,\nDELETE_USER_FAIL,\nDELETE_USER_REQUEST,\nDELETE_USER_SUCCESS\n} from \"../constants/userConstants\";\nimport { getStripeData} from '../actions/stripeActions';\nimport axios from \"axios\";\n\n//login\nexport const login = (email,password)=>async(dispatch)=>{\n    console.log(\"im in login\");\n   try{\n     dispatch({\n         type:LOGIN_REQUEST\n    })\n    const config={\n      headers:{\n          'Content-Type':'application/json'\n      }\n    }\nconst {data} = await axios.post(\"http://localhost:3001/auth/login\",{email,password},config)\nconsole.log(\"loginuserdata\",data);\ndispatch({\n    type:LOGIN_SUCCESS,\n    payload:data.user\n})\ndispatch({\n    type: GLOBALTYPES.AUTH,\n    payload: { token: res.data.access_token, user: res.data.user },\n  });\ndispatch(getStripeData());\n\n   }catch(error){\n       console.log(\"im in login catch\");\n       console.log(\"error\",error.response.data.errMessage);\n    dispatch({\n        type:LOGIN_FAIL,\n        payload:error.response.data.errMessage\n    })\n   }\n}\n\n//register user\nexport const register = (userData)=>async(dispatch)=>{\n    console.log(\"im in register\");\n    try{\n      dispatch({\n          type:REGISTER_USER_REQUEST\n     })\n     const config={\n       headers:{\n           'Content-Type':'multipart/form-data'\n       }\n     }\n const {data} = await axios.post(\"http://localhost:3001/auth/register\",userData,config)\n console.log(\"registerdata\",data);\n dispatch({\n     type:REGISTER_USER_SUCCESS,\n     payload:data.user\n })\n \n    }catch(error){\n        console.log(\"error\",error.response);\n     dispatch({\n         type:REGISTER_USER_FAIL,\n         payload:error.response.data.errMessage\n     })\n    }\n }\n\n //load user\n export const loadUser = ()=>async(dispatch)=>{\n     console.log(\"im in load user\");\n    try{\n      dispatch({\n          type:LOAD_USER_REQUEST\n     })\n    \n const {data} = await axios.get(\"http://localhost:3001/auth/me\");\n console.log(\"loaduserdata\",data);\n//  console.log(\"stripeApiKey\",stripeApiKey);\n//  const {stripeData} = await axios.get(\"http://localhost:3001/user/payment/stripeApi\");\n//  console.log(\"stripeData\",stripeData)\n//  setStripeApiKey(stripeData.stripeApiKey);\n dispatch({\n     type:LOAD_USER_SUCCESS,\n     payload:data.user\n })\n// }\n    }catch(error){\n      console.log(\"Error\",error);\n     dispatch({\n         type:LOAD_USER_FAIL,\n         payload:error.response.data.errMessage\n     })\n    }\n }\n\n //logout user\n export const logoutUser = ()=>async(dispatch)=>{\n    console.log(\"im in load user\");\n   try{\n  const {data} = await axios.get(\"http://localhost:3001/auth/logout\");\nconsole.log(\"logoutuserdata\",data);\ndispatch({\n    type:LOGOUT_SUCCESS\n})\n}catch(error){\n    console.log(\"logouterrpr\",error);\n    dispatch({\n        type:LOGOUT_FAIL,\n        payload:error.response.data.errMessage\n    })\n   }\n}\n\n//register user\nexport const updateProfile = (userData)=>async(dispatch)=>{\n    console.log(\"im in register\");\n    try{\n      dispatch({\n          type:UPDATE_PROFILE_REQUEST\n     })\n     const config={\n       headers:{\n           'Content-Type':'multipart/form-data'\n       }\n     }\n const {data} = await axios.put(\"http://localhost:3001/auth/me/update\",userData,config)\n console.log(\"userdata\",data);\n dispatch({\n     type:UPDATE_PROFILE_SUCCESS,\n     payload:data.success\n })\n \n    }catch(error){\n     dispatch({\n         type:UPDATE_PROFILE_FAIL,\n         payload:error.response.data.errMessage\n     })\n    }\n }\n\n//update password\nexport const updatePassword = (passwords)=>async(dispatch)=>{\n    console.log(\"im in update password\");\n    try{\n      dispatch({\n          type:UPDATE_PASSWORD_REQUEST\n     })\n     const config={\n       headers:{\n           'Content-Type':'application/json'\n       }\n     }\n const {data} = await axios.put(\"http://localhost:3001/auth/password/updatepassword\",passwords,config)\n console.log(\"userdata\",data);\n dispatch({\n     type:UPDATE_PASSWORD_SUCCESS,\n     payload:data.success\n })\n \n    }catch(error){\n        console.log(\"error\",error.response);\n     dispatch({\n         type:UPDATE_PASSWORD_FAIL,\n         payload:error.response.data.errMessage\n     })\n    }\n }\n\n //reset password\n export const resetPassword = (token,passwords)=>async(dispatch)=>{\n    console.log(\"im in new password\");\n    try{\n      dispatch({\n          type:NEW_PASSWORD_REQUEST\n     })\n     const config={\n       headers:{\n           'Content-Type':'application/json'\n       }\n     }\n const {data} = await axios.put(`http://localhost:3001/auth/password/reset/${token}`,passwords,config)\n console.log(\"userdata\",data);\n dispatch({\n     type:NEW_PASSWORD_SUCCESS,\n     payload:data.success\n })\n \n    }catch(error){\n        console.log(\"error\",error.response);\n     dispatch({\n         type:NEW_PASSWORD_FAIL,\n         payload:error.response.data.errMessage\n     })\n    }\n }\n\n  //forgot password\n  export const forgotPassword = (email)=>async(dispatch)=>{\n    console.log(\"im in forgot password\");\n    console.log(\"email\",email);\n    try{\n      dispatch({\n          type:FORGOT_PASSWORD_REQUEST\n     })\n     const config={\n       headers:{\n           'Content-Type':'application/json'\n       }\n     }\n const {data} = await axios.post(\"http://localhost:3001/auth/password/forgot\",email,config)\n console.log(\"userdata\",data);\n dispatch({\n     type:FORGOT_PASSWORD_SUCCESS,\n     payload:data.message\n })\n \n    }catch(error){\n        console.log(\"error\",error.response);\n     dispatch({\n         type:FORGOT_PASSWORD_FAIL,\n         payload:error.response.data.errMessage\n     })\n    }\n }\n\n export const getAllUsers = ()=>async(dispatch)=>{\n    console.log(\"im in get users\");\n   try{\n     dispatch({\n         type:ALL_USERS_REQUEST\n    })\n   \nconst {data} = await axios.get(\"http://localhost:3001/auth/admin/users\");\nconsole.log(\"Allusersdata\",data);\n\ndispatch({\n    type:ALL_USERS_SUCCESS,\n    payload:data.users\n})\n// }\n   }catch(error){\n       console.log(\"im in cathc\");\n       console.log(\"error\",error);\n    dispatch({\n        type:ALL_USERS_FAIL,\n        payload:error.response.data.errMessage\n    })\n   }\n}\n\n\nexport const updateUser = (id, userData) => async (dispatch) => {\n    try {\n\n        dispatch({ type: UPDATE_USER_REQUEST })\n\n        const config = {\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        }\n\n        const { data } = await axios.put(`http://localhost:3001/auth/admin/user/${id}`, userData, config)\n\n        dispatch({\n            type: UPDATE_USER_SUCCESS,\n            payload: data.success\n        })\n\n    } catch (error) {\n        dispatch({\n            type: UPDATE_USER_FAIL,\n            payload: error.response.data.errMessage\n        })\n    }\n}\n\nexport const getUserDetails = (id) => async (dispatch) => {\n    try {\n\n    dispatch({ type: USER_DETAILS_REQUEST })\n const { data } = await axios.get(`http://localhost:3001/auth/admin/user/${id}`)\n\n        dispatch({\n            type: USER_DETAILS_SUCCESS,\n            payload: data.user\n        })\n\n    } catch (error) {\n        dispatch({\n            type: USER_DETAILS_FAIL,\n            payload: error.response.data.errMessage\n        })\n    }\n}\n\n// Delete user - ADMIN\nexport const deleteUser = (id) => async (dispatch) => {\n    console.log(\"im in delete user\")\n    console.log(\"id\",id);\n    try {\n\n dispatch({ type: DELETE_USER_REQUEST })\n  const { data } = await axios.delete(`http://localhost:3001/auth/admin/user/${id}`);\n  console.log(\"deleteData\",data);  \n  dispatch({\n            type: DELETE_USER_SUCCESS,\n            payload: data.success\n        })\n\n    } catch (error) {\n        dispatch({\n            type: DELETE_USER_FAIL,\n            payload: error.response.data.errMessage\n        })\n    }\n}\n//clear error\nexport const clearErrors = ()=>async(dispatch)=>{\n    dispatch({\n        type:CLEAR_ERRORS\n    })\n }"]},"metadata":{},"sourceType":"module"}