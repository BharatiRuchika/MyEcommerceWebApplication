{"ast":null,"code":"import axios from \"axios\";\nimport { ALL_PRODUCTS_REQUEST, ALL_PRODUCTS_SUCCESS, ALL_PRODUCTS_FAIL, CLEAR_ERRORS, PRODUCTS_DETAILS_FAIL, PRODUCTS_DETAILS_SUCCESS, PRODUCTS_DETAILS_REQUEST, NEW_REVIEW_SUCCESS, NEW_REVIEW_REQUEST, NEW_REVIEW_FAIL, ADMIN_PRODUCTS_FAIL, ADMIN_PRODUCTS_REQUEST, ADMIN_PRODUCTS_SUCCESS, NEW_PRODUCT_REQUEST, NEW_PRODUCT_SUCCESS, NEW_PRODUCT_FAIL, DELETE_PRODUCT_FAIL, DELETE_PRODUCT_SUCCESS, DELETE_PRODUCT_REQUEST, UPDATE_PRODUCT_FAIL, UPDATE_PRODUCT_REQUEST, UPDATE_PRODUCT_SUCCESS, GET_REVIEWS_REQUEST, GET_REVIEWS_SUCCESS, GET_REVIEWS_FAIL, DELETE_REVIEW_REQUEST, DELETE_REVIEW_SUCCESS, DELETE_REVIEW_RESET, DELETE_REVIEW_FAIL } from \"../constants/productConstants\";\nimport { useSelector } from \"react-redux\";\nexport const getProducts = function () {\n  let keyword = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n  let currentPage = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  let price = arguments.length > 2 ? arguments[2] : undefined;\n  let category = arguments.length > 3 ? arguments[3] : undefined;\n  let rating = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n  return async dispatch => {\n    // console.log(\"im in get Products\");\n    // console.log(\"currentPage\",currentPage);\n    // console.log(\"keyword\",keyword);\n    // console.log(\"getcategory\",category);\n    try {\n      dispatch({\n        type: ALL_PRODUCTS_REQUEST\n      });\n      let link = `http://localhost:3001/products/getproducts?keyword=${keyword}&page=${currentPage}&price[lte]=${price[1]}&price[gte]=${price[0]}&ratings[gte]=${rating}`;\n\n      if (category) {\n        link = `http://localhost:3001/products/getproducts?keyword=${keyword}&page=${currentPage}&price[lte]=${price[1]}&price[gte]=${price[0]}&category=${category}&ratings[gte]=${rating}`;\n      }\n\n      const {\n        data\n      } = await axios.get(link); //   console.log(\"productdata\",data);\n\n      dispatch({\n        type: ALL_PRODUCTS_SUCCESS,\n        payload: data\n      });\n    } catch (error) {\n      dispatch({\n        type: ALL_PRODUCTS_FAIL,\n        payload: error.response.data.errMessage\n      });\n    }\n  };\n};\nexport const getProductDetails = id => async dispatch => {\n  try {\n    // console.log(\"im in product details actions\");\n    dispatch({\n      type: PRODUCTS_DETAILS_REQUEST\n    });\n    const {\n      data\n    } = await axios.get(`http://localhost:3001/products/getproduct/${id}`); //   console.log(\"actiondata\",data.product);\n\n    dispatch({\n      type: PRODUCTS_DETAILS_SUCCESS,\n      payload: data.product\n    });\n  } catch (error) {\n    dispatch({\n      type: PRODUCTS_DETAILS_FAIL,\n      payload: error.response.data.errMessage\n    });\n  }\n};\nexport const newReview = reviewData => async dispatch => {\n  // console.log(\"im in new review action\");\n  // console.log(\"reviewdata\",reviewData);\n  try {\n    // console.log(\"im in product details actions\");\n    dispatch({\n      type: NEW_REVIEW_REQUEST\n    });\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': token\n      }\n    }; //   const header = `Authorization: Bearer ${token}`;\n    //   return axios.get(URLConstants.USER_URL, { headers: { header } });\n\n    const {\n      data\n    } = await axios.put(`http://localhost:3001/products/review`, reviewData, config); //   console.log(\"newreviewdata\",data.success);\n\n    dispatch({\n      type: NEW_REVIEW_SUCCESS,\n      payload: data.success\n    });\n  } catch (error) {\n    console.log(\"Error\", error);\n    dispatch({\n      type: NEW_REVIEW_FAIL,\n      payload: error.response.data.errMessage\n    });\n  }\n}; //get admin producrs\n\nexport const getAdminProducts = () => async dispatch => {\n  try {\n    // console.log(\"im in admin product details actions\");\n    dispatch({\n      type: ADMIN_PRODUCTS_REQUEST\n    });\n    const {\n      data\n    } = await axios.get(`http://localhost:3001/products/admin/getproducts`); //   console.log(\"actiondata\",data.product);\n\n    dispatch({\n      type: ADMIN_PRODUCTS_SUCCESS,\n      payload: data.products\n    });\n  } catch (error) {\n    dispatch({\n      type: ADMIN_PRODUCTS_FAIL,\n      payload: error.response.data.errMessage\n    });\n  }\n}; //create new product\n\nexport const newProduct = productData => async dispatch => {\n  try {\n    //    console.log(\"product data\",productData);\n    dispatch({\n      type: NEW_PRODUCT_REQUEST\n    });\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': token\n      }\n    };\n    const {\n      data\n    } = await axios.post(\"http://localhost:3001/products/admin/createProduct\", productData, config); //  console.log(\"newproductdata\",data);\n\n    dispatch({\n      type: NEW_PRODUCT_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    dispatch({\n      type: NEW_PRODUCT_FAIL,\n      payload: error.response.data.errMessage\n    });\n  }\n}; //delete product\n\nexport const deleteProduct = id => async dispatch => {\n  try {\n    //   console.log(\"im in delete product action\");\n    //   console.log(\"deletId\",id);\n    dispatch({\n      type: DELETE_PRODUCT_REQUEST\n    });\n    const {\n      data\n    } = await axios.delete(`http://localhost:3001/products/admin/deleteProduct/${id}`); //   console.log(\"newproductdata\",data);\n\n    dispatch({\n      type: DELETE_PRODUCT_SUCCESS,\n      payload: data.success\n    });\n  } catch (error) {\n    dispatch({\n      type: DELETE_PRODUCT_FAIL,\n      payload: error.response.data.errMessage\n    });\n  }\n}; //update product\n\nexport const updateProduct = (id, productData) => async dispatch => {\n  try {\n    dispatch({\n      type: UPDATE_PRODUCT_REQUEST\n    });\n    const {\n      data\n    } = await axios.put(`http://localhost:3001/products/admin/updateProduct/${id}`, productData); //   console.log(\"newproductdata\",data);\n\n    dispatch({\n      type: UPDATE_PRODUCT_SUCCESS,\n      payload: data.success\n    });\n  } catch (error) {\n    dispatch({\n      type: UPDATE_PRODUCT_FAIL,\n      payload: error.response.data.errMessage\n    });\n  }\n}; // Get product reviews\n\nexport const getProductReviews = id => async dispatch => {\n  try {\n    // console.log(\"im in review action\");\n    dispatch({\n      type: GET_REVIEWS_REQUEST\n    });\n    const {\n      data\n    } = await axios.get(`http://localhost:3001/products/reviews?id=${id}`); // console.log(\"reviewData\",data);\n\n    dispatch({\n      type: GET_REVIEWS_SUCCESS,\n      payload: data.reviews\n    });\n  } catch (error) {\n    dispatch({\n      type: GET_REVIEWS_FAIL,\n      payload: error.response.data.errMessage\n    });\n  }\n}; // Delete product review\n\nexport const deleteReview = (id, productId) => async dispatch => {\n  try {\n    dispatch({\n      type: DELETE_REVIEW_REQUEST\n    });\n    const {\n      data\n    } = await axios.delete(`http://localhost:3001/products/review?id=${id}&productId=${productId}`);\n    dispatch({\n      type: DELETE_REVIEW_SUCCESS,\n      payload: data.success\n    });\n  } catch (error) {\n    console.log(error.response);\n    dispatch({\n      type: DELETE_REVIEW_FAIL,\n      payload: error.response.data.errMessage\n    });\n  }\n}; //clear error\n\nexport const clearErrors = () => async dispatch => {\n  dispatch({\n    type: CLEAR_ERRORS\n  });\n};","map":{"version":3,"sources":["/Users/ruchikaashokbharati/Documents/Projects/Ecommerce1/Ecommerce-Backend-main/client/src/actions/productActions.js"],"names":["axios","ALL_PRODUCTS_REQUEST","ALL_PRODUCTS_SUCCESS","ALL_PRODUCTS_FAIL","CLEAR_ERRORS","PRODUCTS_DETAILS_FAIL","PRODUCTS_DETAILS_SUCCESS","PRODUCTS_DETAILS_REQUEST","NEW_REVIEW_SUCCESS","NEW_REVIEW_REQUEST","NEW_REVIEW_FAIL","ADMIN_PRODUCTS_FAIL","ADMIN_PRODUCTS_REQUEST","ADMIN_PRODUCTS_SUCCESS","NEW_PRODUCT_REQUEST","NEW_PRODUCT_SUCCESS","NEW_PRODUCT_FAIL","DELETE_PRODUCT_FAIL","DELETE_PRODUCT_SUCCESS","DELETE_PRODUCT_REQUEST","UPDATE_PRODUCT_FAIL","UPDATE_PRODUCT_REQUEST","UPDATE_PRODUCT_SUCCESS","GET_REVIEWS_REQUEST","GET_REVIEWS_SUCCESS","GET_REVIEWS_FAIL","DELETE_REVIEW_REQUEST","DELETE_REVIEW_SUCCESS","DELETE_REVIEW_RESET","DELETE_REVIEW_FAIL","useSelector","getProducts","keyword","currentPage","price","category","rating","dispatch","type","link","data","get","payload","error","response","errMessage","getProductDetails","id","product","newReview","reviewData","config","headers","token","put","success","console","log","getAdminProducts","products","newProduct","productData","post","deleteProduct","delete","updateProduct","getProductReviews","reviews","deleteReview","productId","clearErrors"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,oBAAR,EAA6BC,oBAA7B,EAAkDC,iBAAlD,EAAoEC,YAApE,EAAiFC,qBAAjF,EAAuGC,wBAAvG,EAAgIC,wBAAhI,EAAyJC,kBAAzJ,EAA4KC,kBAA5K,EAA+LC,eAA/L,EAA+MC,mBAA/M,EAAmOC,sBAAnO,EAA0PC,sBAA1P,EAAkRC,mBAAlR,EAAuSC,mBAAvS,EAA4TC,gBAA5T,EAA6UC,mBAA7U,EAAiWC,sBAAjW,EAAwXC,sBAAxX,EAA+YC,mBAA/Y,EAAmaC,sBAAna,EAA0bC,sBAA1b,EAAidC,mBAAjd,EAAqeC,mBAAre,EAAyfC,gBAAzf,EAA0gBC,qBAA1gB,EAAgiBC,qBAAhiB,EAAsjBC,mBAAtjB,EAA0kBC,kBAA1kB,QAAmmB,+BAAnmB;AAEA,SAASC,WAAT,QAA4B,aAA5B;AAGA,OAAO,MAAMC,WAAW,GAAG;AAAA,MAACC,OAAD,uEAAS,EAAT;AAAA,MAAYC,WAAZ,uEAAwB,CAAxB;AAAA,MAA0BC,KAA1B;AAAA,MAAgCC,QAAhC;AAAA,MAAyCC,MAAzC,uEAAgD,CAAhD;AAAA,SAAoD,MAAOC,QAAP,IAAkB;AAC7F;AACA;AACA;AACA;AACA,QAAG;AACDA,MAAAA,QAAQ,CAAC;AAACC,QAAAA,IAAI,EAACrC;AAAN,OAAD,CAAR;AACA,UAAIsC,IAAI,GAAI,sDAAqDP,OAAQ,SAAQC,WAAY,eAAcC,KAAK,CAAC,CAAD,CAAI,eAAcA,KAAK,CAAC,CAAD,CAAI,iBAAgBE,MAAO,EAAlK;;AACA,UAAGD,QAAH,EAAY;AACVI,QAAAA,IAAI,GAAI,sDAAqDP,OAAQ,SAAQC,WAAY,eAAcC,KAAK,CAAC,CAAD,CAAI,eAAcA,KAAK,CAAC,CAAD,CAAI,aAAYC,QAAS,iBAAgBC,MAAO,EAAnL;AACD;;AACD,YAAM;AAACI,QAAAA;AAAD,UAAS,MAAMxC,KAAK,CAACyC,GAAN,CAAUF,IAAV,CAArB,CANC,CAOH;;AACEF,MAAAA,QAAQ,CAAC;AACLC,QAAAA,IAAI,EAACpC,oBADA;AAELwC,QAAAA,OAAO,EAACF;AAFH,OAAD,CAAR;AAID,KAZD,CAYC,OAAMG,KAAN,EAAY;AACTN,MAAAA,QAAQ,CAAC;AACLC,QAAAA,IAAI,EAACnC,iBADA;AAELuC,QAAAA,OAAO,EAACC,KAAK,CAACC,QAAN,CAAeJ,IAAf,CAAoBK;AAFvB,OAAD,CAAR;AAIH;AACJ,GAvB0B;AAAA,CAApB;AAyBP,OAAO,MAAMC,iBAAiB,GAAIC,EAAD,IAAM,MAAOV,QAAP,IAAkB;AACrD,MAAG;AACC;AACFA,IAAAA,QAAQ,CAAC;AAACC,MAAAA,IAAI,EAAC/B;AAAN,KAAD,CAAR;AACA,UAAM;AAACiC,MAAAA;AAAD,QAAS,MAAMxC,KAAK,CAACyC,GAAN,CAAW,6CAA4CM,EAAG,EAA1D,CAArB,CAHC,CAIH;;AACEV,IAAAA,QAAQ,CAAC;AACLC,MAAAA,IAAI,EAAChC,wBADA;AAELoC,MAAAA,OAAO,EAACF,IAAI,CAACQ;AAFR,KAAD,CAAR;AAID,GATD,CASC,OAAML,KAAN,EAAY;AACTN,IAAAA,QAAQ,CAAC;AACLC,MAAAA,IAAI,EAACjC,qBADA;AAELqC,MAAAA,OAAO,EAACC,KAAK,CAACC,QAAN,CAAeJ,IAAf,CAAoBK;AAFvB,KAAD,CAAR;AAIH;AACJ,CAhBM;AAkBP,OAAO,MAAMI,SAAS,GAAIC,UAAD,IAAc,MAAOb,QAAP,IAAkB;AACrD;AACA;AACA,MAAG;AACC;AACFA,IAAAA,QAAQ,CAAC;AAACC,MAAAA,IAAI,EAAC7B;AAAN,KAAD,CAAR;AACA,UAAM0C,MAAM,GAAC;AACXC,MAAAA,OAAO,EAAC;AACJ,wBAAe,kBADX;AAEJ,yBAAiBC;AAFb;AADG,KAAb,CAHC,CAUH;AACA;;AAEE,UAAM;AAACb,MAAAA;AAAD,QAAS,MAAMxC,KAAK,CAACsD,GAAN,CAAW,uCAAX,EAAkDJ,UAAlD,EAA6DC,MAA7D,CAArB,CAbC,CAcH;;AACEd,IAAAA,QAAQ,CAAC;AACLC,MAAAA,IAAI,EAAC9B,kBADA;AAELkC,MAAAA,OAAO,EAACF,IAAI,CAACe;AAFR,KAAD,CAAR;AAID,GAnBD,CAmBC,OAAMZ,KAAN,EAAY;AACTa,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAoBd,KAApB;AACAN,IAAAA,QAAQ,CAAC;AACLC,MAAAA,IAAI,EAAC5B,eADA;AAELgC,MAAAA,OAAO,EAACC,KAAK,CAACC,QAAN,CAAeJ,IAAf,CAAoBK;AAFvB,KAAD,CAAR;AAIH;AACJ,CA7BM,C,CA+BP;;AACA,OAAO,MAAMa,gBAAgB,GAAG,MAAI,MAAOrB,QAAP,IAAkB;AAClD,MAAG;AACC;AACFA,IAAAA,QAAQ,CAAC;AAACC,MAAAA,IAAI,EAAC1B;AAAN,KAAD,CAAR;AACA,UAAM;AAAC4B,MAAAA;AAAD,QAAS,MAAMxC,KAAK,CAACyC,GAAN,CAAW,kDAAX,CAArB,CAHC,CAIH;;AACEJ,IAAAA,QAAQ,CAAC;AACLC,MAAAA,IAAI,EAACzB,sBADA;AAEL6B,MAAAA,OAAO,EAACF,IAAI,CAACmB;AAFR,KAAD,CAAR;AAID,GATD,CASC,OAAMhB,KAAN,EAAY;AACTN,IAAAA,QAAQ,CAAC;AACLC,MAAAA,IAAI,EAAC3B,mBADA;AAEL+B,MAAAA,OAAO,EAACC,KAAK,CAACC,QAAN,CAAeJ,IAAf,CAAoBK;AAFvB,KAAD,CAAR;AAIH;AACJ,CAhBM,C,CAkBP;;AACA,OAAO,MAAMe,UAAU,GAAIC,WAAD,IAAe,MAAMxB,QAAN,IAAiB;AACvD,MAAG;AACF;AACCA,IAAAA,QAAQ,CAAC;AAACC,MAAAA,IAAI,EAACxB;AAAN,KAAD,CAAR;AACA,UAAMqC,MAAM,GAAC;AACVC,MAAAA,OAAO,EAAC;AACJ,wBAAe,kBADX;AAEJ,yBAAiBC;AAFb;AADE,KAAb;AAQA,UAAM;AAACb,MAAAA;AAAD,QAAS,MAAMxC,KAAK,CAAC8D,IAAN,CAAW,oDAAX,EAAgED,WAAhE,EAA4EV,MAA5E,CAArB,CAXC,CAYF;;AACCd,IAAAA,QAAQ,CAAC;AAACC,MAAAA,IAAI,EAACvB,mBAAN;AAA2B2B,MAAAA,OAAO,EAAEF;AAApC,KAAD,CAAR;AACD,GAdD,CAcC,OAAMG,KAAN,EAAY;AACVN,IAAAA,QAAQ,CAAC;AAACC,MAAAA,IAAI,EAACtB,gBAAN;AAAuB0B,MAAAA,OAAO,EAAEC,KAAK,CAACC,QAAN,CAAeJ,IAAf,CAAoBK;AAApD,KAAD,CAAR;AACF;AACH,CAlBM,C,CAoBP;;AACA,OAAO,MAAMkB,aAAa,GAAIhB,EAAD,IAAM,MAAMV,QAAN,IAAiB;AAChD,MAAG;AACH;AACA;AACEA,IAAAA,QAAQ,CAAC;AAACC,MAAAA,IAAI,EAACnB;AAAN,KAAD,CAAR;AAEA,UAAM;AAACqB,MAAAA;AAAD,QAAS,MAAMxC,KAAK,CAACgE,MAAN,CAAc,sDAAqDjB,EAAG,EAAtE,CAArB,CALC,CAMH;;AACEV,IAAAA,QAAQ,CAAC;AAACC,MAAAA,IAAI,EAACpB,sBAAN;AAA8BwB,MAAAA,OAAO,EAAEF,IAAI,CAACe;AAA5C,KAAD,CAAR;AACD,GARD,CAQC,OAAMZ,KAAN,EAAY;AACVN,IAAAA,QAAQ,CAAC;AAACC,MAAAA,IAAI,EAACrB,mBAAN;AAA0ByB,MAAAA,OAAO,EAAEC,KAAK,CAACC,QAAN,CAAeJ,IAAf,CAAoBK;AAAvD,KAAD,CAAR;AACF;AACH,CAZK,C,CAcN;;AACA,OAAO,MAAMoB,aAAa,GAAG,CAAClB,EAAD,EAAIc,WAAJ,KAAkB,MAAMxB,QAAN,IAAiB;AAC7D,MAAG;AAEDA,IAAAA,QAAQ,CAAC;AAACC,MAAAA,IAAI,EAACjB;AAAN,KAAD,CAAR;AAEA,UAAM;AAACmB,MAAAA;AAAD,QAAS,MAAMxC,KAAK,CAACsD,GAAN,CAAW,sDAAqDP,EAAG,EAAnE,EAAqEc,WAArE,CAArB,CAJC,CAKH;;AACExB,IAAAA,QAAQ,CAAC;AAACC,MAAAA,IAAI,EAAChB,sBAAN;AAA8BoB,MAAAA,OAAO,EAAEF,IAAI,CAACe;AAA5C,KAAD,CAAR;AACD,GAPD,CAOC,OAAMZ,KAAN,EAAY;AACVN,IAAAA,QAAQ,CAAC;AAACC,MAAAA,IAAI,EAAClB,mBAAN;AAA0BsB,MAAAA,OAAO,EAAEC,KAAK,CAACC,QAAN,CAAeJ,IAAf,CAAoBK;AAAvD,KAAD,CAAR;AACF;AACH,CAXM,C,CAaP;;AACD,OAAO,MAAMqB,iBAAiB,GAAInB,EAAD,IAAQ,MAAOV,QAAP,IAAoB;AACzD,MAAI;AACA;AACAA,IAAAA,QAAQ,CAAC;AAAEC,MAAAA,IAAI,EAAEf;AAAR,KAAD,CAAR;AAEA,UAAM;AAAEiB,MAAAA;AAAF,QAAW,MAAMxC,KAAK,CAACyC,GAAN,CAAW,6CAA4CM,EAAG,EAA1D,CAAvB,CAJA,CAKA;;AACAV,IAAAA,QAAQ,CAAC;AACLC,MAAAA,IAAI,EAAEd,mBADD;AAELkB,MAAAA,OAAO,EAAEF,IAAI,CAAC2B;AAFT,KAAD,CAAR;AAKH,GAXD,CAWE,OAAOxB,KAAP,EAAc;AAEZN,IAAAA,QAAQ,CAAC;AACLC,MAAAA,IAAI,EAAEb,gBADD;AAELiB,MAAAA,OAAO,EAACC,KAAK,CAACC,QAAN,CAAeJ,IAAf,CAAoBK;AAFvB,KAAD,CAAR;AAIH;AACJ,CAnBM,C,CAqBP;;AACA,OAAO,MAAMuB,YAAY,GAAG,CAACrB,EAAD,EAAKsB,SAAL,KAAmB,MAAOhC,QAAP,IAAoB;AAC/D,MAAI;AAEAA,IAAAA,QAAQ,CAAC;AAAEC,MAAAA,IAAI,EAAEZ;AAAR,KAAD,CAAR;AAEA,UAAM;AAAEc,MAAAA;AAAF,QAAW,MAAMxC,KAAK,CAACgE,MAAN,CAAc,4CAA2CjB,EAAG,cAAasB,SAAU,EAAnF,CAAvB;AAEAhC,IAAAA,QAAQ,CAAC;AACLC,MAAAA,IAAI,EAAEX,qBADD;AAELe,MAAAA,OAAO,EAAEF,IAAI,CAACe;AAFT,KAAD,CAAR;AAKH,GAXD,CAWE,OAAOZ,KAAP,EAAc;AAEZa,IAAAA,OAAO,CAACC,GAAR,CAAYd,KAAK,CAACC,QAAlB;AAEAP,IAAAA,QAAQ,CAAC;AACLC,MAAAA,IAAI,EAAET,kBADD;AAELa,MAAAA,OAAO,EAACC,KAAK,CAACC,QAAN,CAAeJ,IAAf,CAAoBK;AAFvB,KAAD,CAAR;AAIH;AACJ,CArBM,C,CAuBP;;AACA,OAAO,MAAMyB,WAAW,GAAG,MAAI,MAAMjC,QAAN,IAAiB;AAC7CA,EAAAA,QAAQ,CAAC;AACLC,IAAAA,IAAI,EAAClC;AADA,GAAD,CAAR;AAGF,CAJM","sourcesContent":["import axios from \"axios\";\nimport {ALL_PRODUCTS_REQUEST,ALL_PRODUCTS_SUCCESS,ALL_PRODUCTS_FAIL,CLEAR_ERRORS,PRODUCTS_DETAILS_FAIL,PRODUCTS_DETAILS_SUCCESS,PRODUCTS_DETAILS_REQUEST,NEW_REVIEW_SUCCESS,NEW_REVIEW_REQUEST,NEW_REVIEW_FAIL,ADMIN_PRODUCTS_FAIL,ADMIN_PRODUCTS_REQUEST,ADMIN_PRODUCTS_SUCCESS, NEW_PRODUCT_REQUEST, NEW_PRODUCT_SUCCESS, NEW_PRODUCT_FAIL,DELETE_PRODUCT_FAIL,DELETE_PRODUCT_SUCCESS,DELETE_PRODUCT_REQUEST,UPDATE_PRODUCT_FAIL,UPDATE_PRODUCT_REQUEST,UPDATE_PRODUCT_SUCCESS,GET_REVIEWS_REQUEST,GET_REVIEWS_SUCCESS,GET_REVIEWS_FAIL,DELETE_REVIEW_REQUEST,DELETE_REVIEW_SUCCESS,DELETE_REVIEW_RESET,DELETE_REVIEW_FAIL} from \"../constants/productConstants\";\n\nimport { useSelector } from \"react-redux\";\n\n\nexport const getProducts = (keyword=\"\",currentPage=1,price,category,rating=0)=>async (dispatch)=>{\n    // console.log(\"im in get Products\");\n    // console.log(\"currentPage\",currentPage);\n    // console.log(\"keyword\",keyword);\n    // console.log(\"getcategory\",category);\n    try{\n      dispatch({type:ALL_PRODUCTS_REQUEST})\n      let link = `http://localhost:3001/products/getproducts?keyword=${keyword}&page=${currentPage}&price[lte]=${price[1]}&price[gte]=${price[0]}&ratings[gte]=${rating}`;\n      if(category){\n        link = `http://localhost:3001/products/getproducts?keyword=${keyword}&page=${currentPage}&price[lte]=${price[1]}&price[gte]=${price[0]}&category=${category}&ratings[gte]=${rating}`\n      }\n      const {data} = await axios.get(link);\n    //   console.log(\"productdata\",data);\n      dispatch({\n          type:ALL_PRODUCTS_SUCCESS,\n          payload:data\n      })\n    }catch(error){\n        dispatch({\n            type:ALL_PRODUCTS_FAIL,\n            payload:error.response.data.errMessage\n        })\n    }\n}\n\nexport const getProductDetails = (id)=>async (dispatch)=>{\n    try{\n        // console.log(\"im in product details actions\");\n      dispatch({type:PRODUCTS_DETAILS_REQUEST})\n      const {data} = await axios.get(`http://localhost:3001/products/getproduct/${id}`);\n    //   console.log(\"actiondata\",data.product);\n      dispatch({\n          type:PRODUCTS_DETAILS_SUCCESS,\n          payload:data.product\n      })\n    }catch(error){\n        dispatch({\n            type:PRODUCTS_DETAILS_FAIL,\n            payload:error.response.data.errMessage\n        })\n    }\n}\n\nexport const newReview = (reviewData)=>async (dispatch)=>{\n    // console.log(\"im in new review action\");\n    // console.log(\"reviewdata\",reviewData);\n    try{\n        // console.log(\"im in product details actions\");\n      dispatch({type:NEW_REVIEW_REQUEST})\n      const config={\n        headers:{\n            'Content-Type':'application/json',\n            'Authorization': token\n        }\n      }\n     \n    //   const header = `Authorization: Bearer ${token}`;\n    //   return axios.get(URLConstants.USER_URL, { headers: { header } });\n\n      const {data} = await axios.put(`http://localhost:3001/products/review`,reviewData,config);\n    //   console.log(\"newreviewdata\",data.success);\n      dispatch({\n          type:NEW_REVIEW_SUCCESS,\n          payload:data.success\n      })\n    }catch(error){\n        console.log(\"Error\",error);\n        dispatch({\n            type:NEW_REVIEW_FAIL,\n            payload:error.response.data.errMessage\n        })\n    }\n}\n\n//get admin producrs\nexport const getAdminProducts = ()=>async (dispatch)=>{\n    try{\n        // console.log(\"im in admin product details actions\");\n      dispatch({type:ADMIN_PRODUCTS_REQUEST})\n      const {data} = await axios.get(`http://localhost:3001/products/admin/getproducts`);\n    //   console.log(\"actiondata\",data.product);\n      dispatch({\n          type:ADMIN_PRODUCTS_SUCCESS,\n          payload:data.products\n      })\n    }catch(error){\n        dispatch({\n            type:ADMIN_PRODUCTS_FAIL,\n            payload:error.response.data.errMessage\n        })\n    }\n}\n\n//create new product\nexport const newProduct = (productData)=>async(dispatch)=>{\n   try{\n    //    console.log(\"product data\",productData);\n     dispatch({type:NEW_PRODUCT_REQUEST});\n     const config={\n        headers:{\n            'Content-Type':'application/json',\n            'Authorization': token\n        }\n\n      }\n      \n     const {data} = await axios.post(\"http://localhost:3001/products/admin/createProduct\",productData,config);\n    //  console.log(\"newproductdata\",data);\n     dispatch({type:NEW_PRODUCT_SUCCESS, payload: data})\n   }catch(error){\n      dispatch({type:NEW_PRODUCT_FAIL,payload: error.response.data.errMessage})\n   }\n}\n\n//delete product\nexport const deleteProduct = (id)=>async(dispatch)=>{\n    try{\n    //   console.log(\"im in delete product action\");\n    //   console.log(\"deletId\",id);\n      dispatch({type:DELETE_PRODUCT_REQUEST});\n     \n      const {data} = await axios.delete(`http://localhost:3001/products/admin/deleteProduct/${id}`);\n    //   console.log(\"newproductdata\",data);\n      dispatch({type:DELETE_PRODUCT_SUCCESS, payload: data.success})\n    }catch(error){\n       dispatch({type:DELETE_PRODUCT_FAIL,payload: error.response.data.errMessage})\n    }\n }\n\n //update product\n export const updateProduct = (id,productData)=>async(dispatch)=>{\n    try{\n        \n      dispatch({type:UPDATE_PRODUCT_REQUEST});\n     \n      const {data} = await axios.put(`http://localhost:3001/products/admin/updateProduct/${id}`,productData);\n    //   console.log(\"newproductdata\",data);\n      dispatch({type:UPDATE_PRODUCT_SUCCESS, payload: data.success})\n    }catch(error){\n       dispatch({type:UPDATE_PRODUCT_FAIL,payload: error.response.data.errMessage})\n    }\n }\n\n // Get product reviews\nexport const getProductReviews = (id) => async (dispatch) => {\n    try {\n        // console.log(\"im in review action\");\n        dispatch({ type: GET_REVIEWS_REQUEST })\n\n        const { data } = await axios.get(`http://localhost:3001/products/reviews?id=${id}`)\n        // console.log(\"reviewData\",data);\n        dispatch({\n            type: GET_REVIEWS_SUCCESS,\n            payload: data.reviews\n        })\n\n    } catch (error) {\n\n        dispatch({\n            type: GET_REVIEWS_FAIL,\n            payload:error.response.data.errMessage\n        })\n    }\n}\n\n// Delete product review\nexport const deleteReview = (id, productId) => async (dispatch) => {\n    try {\n\n        dispatch({ type: DELETE_REVIEW_REQUEST })\n\n        const { data } = await axios.delete(`http://localhost:3001/products/review?id=${id}&productId=${productId}`)\n\n        dispatch({\n            type: DELETE_REVIEW_SUCCESS,\n            payload: data.success\n        })\n\n    } catch (error) {\n\n        console.log(error.response);\n\n        dispatch({\n            type: DELETE_REVIEW_FAIL,\n            payload:error.response.data.errMessage\n        })\n    }\n}\n\n//clear error\nexport const clearErrors = ()=>async(dispatch)=>{\n   dispatch({\n       type:CLEAR_ERRORS\n   })\n}"]},"metadata":{},"sourceType":"module"}