{"ast":null,"code":"import _slicedToArray from\"/Users/ruchikaashokbharati/Documents/Projects/Ecommerce/Ecommerce-Backend-main/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useAlert}from'react-alert';import{useDispatch,useSelector}from'react-redux';import Loader from\"../layouts/loader\";import MetaData from'../layouts/MetaData';import{Link}from'react-router-dom';import{updateProfile,loadUser,clearErrors}from\"../../actions/userActions\";import{UPDATE_PROFILE_RESET}from'../../constants/userConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var UpdateProfile=function UpdateProfile(_ref){var history=_ref.history;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),avatar=_useState6[0],setAvatar=_useState6[1];var _useState7=useState(\"/images/default_avatar.jpg\"),_useState8=_slicedToArray(_useState7,2),avatarPreview=_useState8[0],setAvatarPreview=_useState8[1];var alert=useAlert();var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.auth;}),user=_useSelector.user;var _useSelector2=useSelector(function(state){return state.user;}),isUpdated=_useSelector2.isUpdated,loading=_useSelector2.loading,error=_useSelector2.error;var _useSelector3=useSelector(function(state){return state.auth;}),token=_useSelector3.token;useEffect(function(){if(user){setName(user.name);setEmail(user.email);setAvatarPreview(user.avatar.url);}if(error){alert.error(error);dispatch(clearErrors());}if(isUpdated){alert.success(\"user updated successfully\");dispatch(loadUser(token));history.push(\"/me\");dispatch({type:UPDATE_PROFILE_RESET});}},[dispatch,alert,isUpdated,error,history]);var submitHandler=function submitHandler(e){e.preventDefault();var formData=new FormData();formData.set(\"name\",name);formData.set(\"email\",email);formData.set(\"avatar\",avatar);dispatch(updateProfile(formData,token));};var onChange=function onChange(e){var reader=new FileReader();reader.readAsDataURL(e.target.files[0]);reader.onload=function(){if(reader.readyState==2){setAvatarPreview(reader.result);setAvatar(reader.result);}};};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:'Update Profile'}),/*#__PURE__*/_jsx(\"div\",{className:\"row wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-10 col-lg-5\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,className:\"shadow-lg\",encType:\"multipart/form-data\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mt-2 mb-5\",children:\"Update Profile\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email_field\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"name\",id:\"name_field\",className:\"form-control\",name:\"name\",value:name,onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email_field\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email_field\",name:\"email\",className:\"form-control\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"avatar_upload\",children:\"Avatar\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"figure\",{className:\"avatar mr-3 item-rtl\",children:/*#__PURE__*/_jsx(\"img\",{src:avatarPreview,className:\"rounded-circle\",alt:\"Avatar Preview\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"custom-file\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"avatar\",className:\"custom-file-input\",id:\"customFile\",accept:\"image/*\",onChange:onChange}),/*#__PURE__*/_jsx(\"label\",{className:\"custom-file-label\",htmlFor:\"customFile\",children:\"Choose Avatar\"})]})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading?true:false,className:\"btn update-btn btn-block mt-4 mb-3\",children:\"Update\"})]})})})]});};export default UpdateProfile;","map":{"version":3,"sources":["/Users/ruchikaashokbharati/Documents/Projects/Ecommerce/Ecommerce-Backend-main/client/src/components/user/updateProfile.js"],"names":["React","useEffect","useState","useAlert","useDispatch","useSelector","Loader","MetaData","Link","updateProfile","loadUser","clearErrors","UPDATE_PROFILE_RESET","UpdateProfile","history","name","setName","email","setEmail","avatar","setAvatar","avatarPreview","setAvatarPreview","alert","dispatch","state","auth","user","isUpdated","loading","error","token","url","success","push","type","submitHandler","e","preventDefault","formData","FormData","set","onChange","reader","FileReader","readAsDataURL","target","files","onload","readyState","result","value"],"mappings":"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","sourcesContent":["import React,{useEffect,useState} from 'react'\nimport { useAlert } from 'react-alert'\nimport { useDispatch,useSelector } from 'react-redux'\nimport Loader from \"../layouts/loader\";\nimport MetaData from '../layouts/MetaData';\nimport {Link} from 'react-router-dom';\nimport {updateProfile,loadUser,clearErrors} from \"../../actions/userActions\";\nimport { UPDATE_PROFILE_RESET } from '../../constants/userConstants';\nconst UpdateProfile = ({history}) => {\n    const [name,setName] = useState('');\n    const [email,setEmail] = useState('');\n    const [avatar,setAvatar] = useState(\"\");\n    const [avatarPreview,setAvatarPreview] = useState(\"/images/default_avatar.jpg\");\n    const alert = useAlert();\n    const dispatch = useDispatch();\n    const {user} = useSelector(state=>state.auth);\n    const {isUpdated,loading,error} = useSelector(state=>state.user);\n    const {token} = useSelector(state=>state.auth);\n    useEffect(() => {\n        if(user){\n            setName(user.name);\n            setEmail(user.email);\n            setAvatarPreview(user.avatar.url);\n        }\n       if(error){\n           alert.error(error);\n           dispatch(clearErrors());\n       }\n       if(isUpdated){\n           alert.success(\"user updated successfully\");\n           dispatch(loadUser(token));\n           history.push(\"/me\");\n           dispatch({\n               type:UPDATE_PROFILE_RESET\n           })\n       }\n    }, [dispatch,alert,isUpdated,error,history])\n    const submitHandler = (e)=>{\n     e.preventDefault();\n     const formData = new FormData();\n     formData.set(\"name\",name);\n     formData.set(\"email\",email);\n   \n     formData.set(\"avatar\",avatar);\n     dispatch(updateProfile(formData,token))\n    }\n    const onChange = e =>{\n      \n          const reader = new FileReader();\n          reader.readAsDataURL(e.target.files[0]);\n          reader.onload = ()=>{\n              if(reader.readyState == 2){\n                  setAvatarPreview(reader.result);\n                  setAvatar(reader.result);\n              }\n          }\n        \n    }\n    return (\n       <>\n       <MetaData title={'Update Profile'}></MetaData>\n        <div className=\"row wrapper\">\n                <div className=\"col-10 col-lg-5\">\n                    <form onSubmit={submitHandler} className=\"shadow-lg\" encType='multipart/form-data'>\n                        <h1 className=\"mt-2 mb-5\">Update Profile</h1>\n\n                        <div className=\"form-group\">\n                            <label htmlFor=\"email_field\">Name</label>\n                            <input \n\t\t\t\t\t\t\t\ttype=\"name\" \n\t\t\t\t\t\t\t\tid=\"name_field\" \n\t\t\t\t\t\t\t\tclassName=\"form-control\"\n                                name='name'\n                                value={name}\n                                onChange={(e)=>setName(e.target.value)}\n                            />\n                        </div>\n\n                        <div className=\"form-group\">\n                            <label htmlFor=\"email_field\">Email</label>\n                            <input\n                                type=\"email\"\n                                id=\"email_field\"\n                                name=\"email\"\n                                className=\"form-control\"\n                              \n                                value={email}\n                                onChange={(e)=>setEmail(e.target.value)}\n                            />\n                        </div>\n\n                        <div className='form-group'>\n                            <label htmlFor='avatar_upload'>Avatar</label>\n                            <div className='d-flex align-items-center'>\n                                <div>\n                                    <figure className='avatar mr-3 item-rtl'>\n                                        <img\n                                            src={avatarPreview}\n                                            className='rounded-circle'\n                                            alt='Avatar Preview'\n                                        />\n                                    </figure>\n                                </div>\n                                <div className='custom-file'>\n                                    <input\n                                        type='file'\n                                        name='avatar'\n                                    className='custom-file-input'\n                                    id='customFile'\n                                    accept=\"image/*\"\n                                    onChange={onChange}\n                                    />\n                                    <label className='custom-file-label' htmlFor='customFile'>\n                                        Choose Avatar\n                                </label>\n                                </div>\n                            </div>\n                        </div>\n                      \n                        <button type=\"submit\" disabled={loading?true:false} className=\"btn update-btn btn-block mt-4 mb-3\" >Update</button>\n                    </form>\n                </div>\n            </div>\n       </>\n    )\n}\n\nexport default UpdateProfile\n"]},"metadata":{},"sourceType":"module"}