{"ast":null,"code":"import _slicedToArray from\"/Users/ruchikaashokbharati/Documents/Projects/Ecommerce/Ecommerce-Backend-main/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import Loader from\"../layouts/loader\";import MetaData from'../layouts/MetaData';import{useAlert}from'react-alert';import{useDispatch,useSelector}from'react-redux';import{updateOrder,orderDetails,clearErrors}from'../../actions/orderActions';import{Link}from'react-router-dom';import Sidebar from'./Sidebar';import{UPDATE_ORDER_RESET}from'../../constants/orderConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ProcessOrder=function ProcessOrder(_ref){var match=_ref.match;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),status=_useState2[0],setStatus=_useState2[1];var alert=useAlert();var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.orderDetails;}),loading=_useSelector.loading,_useSelector$order=_useSelector.order,order=_useSelector$order===void 0?{}:_useSelector$order;var ShippingInfo=order.ShippingInfo,orderItems=order.orderItems,paymentInfo=order.paymentInfo,User=order.User,totalPrice=order.totalPrice,orderStatus=order.orderStatus;var _useSelector2=useSelector(function(state){return state.updateOrder;}),error=_useSelector2.error,isUpdated=_useSelector2.isUpdated;var orderId=match.params.id;useEffect(function(){dispatch(orderDetails(orderId));if(error){alert.error(error);dispatch(clearErrors());}if(isUpdated){alert.success(\"Order Updated Successfully\");dispatch({type:UPDATE_ORDER_RESET});}console.log(\"im in list orders\");},[dispatch,alert,error,isUpdated,orderId]);var updateOrderHandler=function updateOrderHandler(id){var formData=new FormData();formData.set(\"status\",status);console.log(\"formData\",formData);console.log(\"id\",id);dispatch(updateOrder(id,formData));};var shippingDetails=ShippingInfo&&\"\".concat(ShippingInfo.address,\",\").concat(ShippingInfo.city,\",\").concat(ShippingInfo.postalCode,\",\").concat(ShippingInfo.country);var isPaid=paymentInfo&&paymentInfo.status=='succeeded'?true:false;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:\"Process Order # \".concat(order._id)}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-2\",children:/*#__PURE__*/_jsx(Sidebar,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-10\",children:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"my-5\",children:\"All Orders\"}),loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row d-flex justify-content-around\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 col-lg-7 order-details\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"my-5\",children:[\"Order # \",order._id]}),/*#__PURE__*/_jsx(\"h4\",{className:\"mb-4\",children:\"Shipping Info\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Name:\"}),\" \",User&&User.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Phone:\"}),\" \",ShippingInfo&&ShippingInfo.phoneNo]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Address:\"}),shippingDetails]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Amount:\"}),\" $\",totalPrice]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"h4\",{className:\"my-4\",children:\"Payment\"}),/*#__PURE__*/_jsx(\"p\",{className:isPaid?\"greenColor\":\"redColor\",children:/*#__PURE__*/_jsx(\"b\",{children:isPaid?\"PAID\":\"NOT PAID\"})}),/*#__PURE__*/_jsx(\"h4\",{className:\"my-4\",children:\"Stripe ID\"}),/*#__PURE__*/_jsx(\"p\",{className:\"greenColor\",children:/*#__PURE__*/_jsx(\"b\",{children:paymentInfo&&paymentInfo.id})}),/*#__PURE__*/_jsx(\"h4\",{className:\"my-4\",children:\"Order Status:\"}),/*#__PURE__*/_jsx(\"p\",{className:order.orderStatus&&String(order.orderStatus).includes(\"Delivered\")?\"greenColor\":\"redColor\",children:/*#__PURE__*/_jsx(\"b\",{children:orderStatus})}),/*#__PURE__*/_jsx(\"h4\",{className:\"my-4\",children:\"Order Items:\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"cart-item my-1\",children:orderItems&&orderItems.map(function(item){return/*#__PURE__*/_jsxs(\"div\",{className:\"row my-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-4 col-lg-2\",children:/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:item.name,height:\"45\",width:\"65\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-5 col-lg-5\",children:/*#__PURE__*/_jsx(Link,{to:\"/products/\".concat(item.product),children:item.name})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-4 col-lg-2 mt-4 mt-lg-0\",children:/*#__PURE__*/_jsx(\"p\",{children:item.price})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-4 col-lg-3 mt-4 mt-lg-0\",children:/*#__PURE__*/_jsxs(\"p\",{children:[item.quantity,\" Piece(s)\"]})})]});})}),/*#__PURE__*/_jsx(\"hr\",{})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 col-lg-3 mt-5\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"my-4\",children:\"Status\"}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsxs(\"select\",{className:\"form-control\",name:\"status\",value:status,onChange:function onChange(e){return setStatus(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"Processing\",children:\"Processing\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Shipped\",children:\"Shipped\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Delivered\",children:\"Delivered\"})]})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary btn-block\",onClick:function onClick(){return updateOrderHandler(order._id);},children:\"Update Status\"})]})]})})]})})]})]});};export default ProcessOrder;","map":{"version":3,"sources":["/Users/ruchikaashokbharati/Documents/Projects/Ecommerce/Ecommerce-Backend-main/client/src/components/admin/ProcessOrder.js"],"names":["React","useState","useEffect","Loader","MetaData","useAlert","useDispatch","useSelector","updateOrder","orderDetails","clearErrors","Link","Sidebar","UPDATE_ORDER_RESET","ProcessOrder","match","status","setStatus","alert","dispatch","state","loading","order","ShippingInfo","orderItems","paymentInfo","User","totalPrice","orderStatus","error","isUpdated","orderId","params","id","success","type","console","log","updateOrderHandler","formData","FormData","set","shippingDetails","address","city","postalCode","country","isPaid","_id","name","phoneNo","String","includes","map","item","image","product","price","quantity","e","target","value"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react'\nimport Loader from \"../layouts/loader\";\nimport MetaData from '../layouts/MetaData';\nimport { useAlert } from 'react-alert';\nimport { useDispatch,useSelector } from 'react-redux';\nimport { updateOrder,orderDetails,clearErrors } from '../../actions/orderActions';\n\nimport { Link } from 'react-router-dom';\nimport Sidebar from './Sidebar';\n\nimport { UPDATE_ORDER_RESET } from '../../constants/orderConstants';\n\n\nconst ProcessOrder = ({match}) => {\n    const [status,setStatus] = useState(\"\")\n   const alert = useAlert();\n    const dispatch = useDispatch();\n    const {loading,order={}} = useSelector(state=>state.orderDetails)\n  const {ShippingInfo,orderItems,paymentInfo,User,totalPrice,orderStatus} = order;\n   const {error,isUpdated} = useSelector(state=>state.updateOrder)\n   const orderId = match.params.id;\n   \n useEffect(() => {\n      dispatch(orderDetails(orderId));\n      \n        if(error){\n         alert.error(error);\n         dispatch(clearErrors());\n     }\n   \n     if(isUpdated){\n       alert.success(\"Order Updated Successfully\");\n       dispatch({type:UPDATE_ORDER_RESET})\n     }\n\n        console.log(\"im in list orders\");\n     }, [dispatch, alert, error, isUpdated, orderId])\n     const updateOrderHandler = (id)=>{\n        const formData = new FormData();\n        formData.set(\"status\",status);\n      \n        console.log(\"formData\",formData);\n        console.log(\"id\",id)\n        dispatch(updateOrder(id,formData))\n       }\n      \n    const shippingDetails = ShippingInfo && `${ShippingInfo.address},${ShippingInfo.city},${ShippingInfo.postalCode},${ShippingInfo.country}`;\n    const isPaid = paymentInfo && paymentInfo.status=='succeeded'?true:false;\n    return (\n        <>\n        <MetaData title={`Process Order # ${order._id}`}></MetaData>\n        <div className=\"row\">\n          <div className=\"col-12 col-md-2\">\n              <Sidebar/>\n          </div>\n          <div className=\"col-12 col-md-10\">\n                <>\n                <h1 className=\"my-5\">All Orders</h1>\n              {loading?<Loader/>:(\n                  <>\n                  <div className=\"row d-flex justify-content-around\">\n                    <div className=\"col-12 col-lg-7 order-details\">\n\n                        <h1 className=\"my-5\">Order # {order._id}</h1>\n\n                        <h4 className=\"mb-4\">Shipping Info</h4>\n                        <p><b>Name:</b> {User && User.name}</p>\n                        <p><b>Phone:</b> {ShippingInfo && ShippingInfo.phoneNo}</p>\n                        <p className=\"mb-4\"><b>Address:</b>{shippingDetails}</p>\n                        <p><b>Amount:</b> ${totalPrice}</p>\n\n                        <hr />\n\n                        <h4 className=\"my-4\">Payment</h4>\n                        <p className={isPaid?\"greenColor\":\"redColor\"}><b>{isPaid?\"PAID\":\"NOT PAID\"}</b></p>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<h4 className=\"my-4\">Stripe ID</h4>\n                        <p className=\"greenColor\" ><b>{paymentInfo && paymentInfo.id}</b></p>\n\n\n                        <h4 className=\"my-4\">Order Status:</h4>\n                        <p className={order.orderStatus && String(order.orderStatus).includes(\"Delivered\")?\"greenColor\":\"redColor\"}  ><b>{orderStatus}</b></p>\n\n\n                        <h4 className=\"my-4\">Order Items:</h4>\n\n                        <hr />\n                        <div className=\"cart-item my-1\">\n                            {orderItems && orderItems.map(item=>(\n                                 <div className=\"row my-5\">\n                                 <div className=\"col-4 col-lg-2\">\n                                     <img src={item.image} alt={item.name} height=\"45\" width=\"65\" />\n                                 </div>\n\n                                 <div className=\"col-5 col-lg-5\">\n                                     <Link to={`/products/${item.product}`}>{item.name}</Link>\n                                 </div>\n\n\n                                 <div className=\"col-4 col-lg-2 mt-4 mt-lg-0\">\n                                     <p>{item.price}</p>\n                                 </div>\n\n                                 <div className=\"col-4 col-lg-3 mt-4 mt-lg-0\">\n                                     <p>{item.quantity} Piece(s)</p>\n                                 </div>\n                             </div>\n                            ))}\n                                  \n                        </div>\n                        <hr />\n                    </div>\n\t\t\t\t\t\n\t\t\t\t\t<div className=\"col-12 col-lg-3 mt-5\">\n                                    <h4 className=\"my-4\">Status</h4>\n\n                                    <div className=\"form-group\">\n                                        <select\n                                            className=\"form-control\"\n                                            name='status'\n                                            value={status}\n                                            onChange={(e) => setStatus(e.target.value)}\n                                        >\n                                            <option value=\"Processing\">Processing</option>\n                                            <option value=\"Shipped\">Shipped</option>\n                                            <option value=\"Delivered\">Delivered</option>\n                                        </select>\n                                    </div>\n\n                                    <button className=\"btn btn-primary btn-block\" onClick={()=>updateOrderHandler(order._id)}>\n                                        Update Status\n                                </button>\n                                </div>\n\t\t\t\t\t\n                </div>\n                  </>\n              )}\n                </>\n          </div>\n        </div>\n        </>\n    )\n}\n\nexport default ProcessOrder\n"]},"metadata":{},"sourceType":"module"}