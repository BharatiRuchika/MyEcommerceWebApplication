{"ast":null,"code":"var _jsxFileName = \"/Users/ruchikaashokbharati/Documents/Projects/Ecommerce1/Ecommerce-Backend-main/client/src/components/admin/OrderList.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport Loader from \"../layouts/loader\";\nimport MetaData from '../layouts/MetaData';\nimport { useAlert } from 'react-alert';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getAllOrders, clearErrors, deleteOrder } from '../../actions/orderActions';\nimport { Link } from 'react-router-dom';\nimport Sidebar from './Sidebar';\nimport { MDBDataTable } from 'mdbreact';\nimport { DELETE_ORDER_RESET } from '../../constants/orderConstants';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst OrderList = _ref => {\n  _s();\n\n  let {\n    history\n  } = _ref;\n  const alert = useAlert();\n  const dispatch = useDispatch();\n  const {\n    loading,\n    error,\n    orders\n  } = useSelector(state => state.allOrder);\n  const {\n    isDeleted\n  } = useSelector(state => state.updateOrder);\n  const {\n    token\n  } = useSelector(state => state.auth);\n  useEffect(() => {\n    // console.log(\"im in useEffect\");\n    dispatch(getAllOrders(token));\n\n    if (error) {\n      alert.error(error);\n      dispatch(clearErrors());\n    } // console.log(\"isDeleted\",isDeleted);\n\n\n    if (isDeleted) {\n      alert.success('Order deleted successfully');\n      history.push('/admin/orders');\n      dispatch({\n        type: DELETE_ORDER_RESET\n      });\n    }\n  }, [error, alert, dispatch, isDeleted, history]);\n\n  const deleteOrderHandler = id => {\n    dispatch(deleteOrder(id));\n  };\n\n  const setOrders = () => {\n    const data = {\n      columns: [{\n        label: 'order ID',\n        field: 'id',\n        sort: 'asc'\n      }, {\n        label: 'Num of Items',\n        field: 'numOfItems',\n        sort: 'asc'\n      }, {\n        label: 'Amount',\n        field: 'amount',\n        sort: 'asc'\n      }, {\n        label: 'Status',\n        field: 'status',\n        sort: 'asc'\n      }, {\n        label: 'Actions',\n        field: 'actions'\n      }],\n      rows: []\n    };\n    orders.forEach(order => {\n      data.rows.push({\n        id: order._id,\n        numOfItems: order.orderItems.length,\n        amount: `$${order.totalPrice}`,\n        status: order.orderStatus && String(order.orderStatus).includes(\"Delivered\") ? /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: \"green\"\n          },\n          children: order.orderStatus\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 17\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: \"red\"\n          },\n          children: order.orderStatus\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 17\n        }, this),\n        actions: /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            to: `/admin/order/${order._id}`,\n            className: \"btn btn-primary\",\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-eye\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 27\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => deleteOrderHandler(order._id),\n            className: \"btn btn-danger py-1 px-2 ml-2\",\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-trash\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true)\n      });\n    });\n    return data;\n  }; // const deleteProductHandler=(id)=>{\n  //    dispatch(deleteProduct(id));\n  // }\n\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(MetaData, {\n      title: \"All Orders\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-12 col-md-2\",\n        children: /*#__PURE__*/_jsxDEV(Sidebar, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-12 col-md-10\",\n        children: /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"my-5\",\n            children: \"All Orders\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 17\n          }, this), loading ? /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 26\n          }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: /*#__PURE__*/_jsxDEV(MDBDataTable, {\n              data: setOrders(),\n              className: \"px-3\",\n              bordered: true,\n              striped: true,\n              hover: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 18\n            }, this)\n          }, void 0, false)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n\n_s(OrderList, \"oHp8R49Wf+WT9y+88fBHOGecuUg=\", false, function () {\n  return [useAlert, useDispatch, useSelector, useSelector, useSelector];\n});\n\n_c = OrderList;\nexport default OrderList;\n\nvar _c;\n\n$RefreshReg$(_c, \"OrderList\");","map":{"version":3,"sources":["/Users/ruchikaashokbharati/Documents/Projects/Ecommerce1/Ecommerce-Backend-main/client/src/components/admin/OrderList.js"],"names":["React","useState","useEffect","Loader","MetaData","useAlert","useDispatch","useSelector","getAllOrders","clearErrors","deleteOrder","Link","Sidebar","MDBDataTable","DELETE_ORDER_RESET","OrderList","history","alert","dispatch","loading","error","orders","state","allOrder","isDeleted","updateOrder","token","auth","success","push","type","deleteOrderHandler","id","setOrders","data","columns","label","field","sort","rows","forEach","order","_id","numOfItems","orderItems","length","amount","totalPrice","status","orderStatus","String","includes","color","actions"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react'\nimport Loader from \"../layouts/loader\";\nimport MetaData from '../layouts/MetaData';\nimport { useAlert } from 'react-alert';\nimport { useDispatch,useSelector } from 'react-redux';\nimport { getAllOrders,clearErrors,deleteOrder } from '../../actions/orderActions';\nimport { Link } from 'react-router-dom';\nimport Sidebar from './Sidebar';\nimport { MDBDataTable } from 'mdbreact'\nimport { DELETE_ORDER_RESET } from '../../constants/orderConstants';\n\nconst OrderList = ({history}) => {\n    const alert = useAlert();\n    const dispatch = useDispatch();\n    const {loading,error,orders} = useSelector(state=>state.allOrder)\n \n    const { isDeleted } = useSelector(state => state.updateOrder)\n    const { token } = useSelector((state) => state.auth);\n    useEffect(() => {\n        // console.log(\"im in useEffect\");\n       dispatch(getAllOrders(token))\n       if(error){\n        alert.error(error);\n        dispatch(clearErrors());\n    }\n    // console.log(\"isDeleted\",isDeleted);\n    if (isDeleted) {\n       \n        alert.success('Order deleted successfully');\n        history.push('/admin/orders');\n        dispatch({ type: DELETE_ORDER_RESET })\n    }\n}, [error,alert,dispatch,isDeleted,history])\nconst deleteOrderHandler = (id) => {\n    dispatch(deleteOrder(id))\n}\n    const setOrders = ()=>{\n      const data = {\n          columns:[\n              {\n                  label:'order ID',\n                  field:'id',\n                  sort:'asc'\n              },{\n                  label:'Num of Items',\n                  field:'numOfItems',\n                  sort:'asc'\n              },{\n                label:'Amount',\n                field:'amount',\n                sort:'asc'\n            },\n            {\n                label:'Status',\n                field:'status',\n                sort:'asc'\n            },\n            {\n                label:'Actions',\n                field:'actions',\n                \n            }\n          ],\n          rows:[\n\n          ]\n        }\n        orders.forEach(order=>{\n            data.rows.push({\n                id:order._id,\n                numOfItems:order.orderItems.length,\n                amount:`$${order.totalPrice}`,\n               \n                status:order.orderStatus && String(order.orderStatus).includes(\"Delivered\")?\n                <p style={{color:\"green\"}}>{order.orderStatus}</p>:\n                <p style={{color:\"red\"}}>{order.orderStatus}</p>,\n                actions:<><Link to={`/admin/order/${order._id}`} className=\"btn btn-primary\">\n                    <i className=\"fa fa-eye\"></i>\n                </Link>\n                <button onClick={() => deleteOrderHandler(order._id)} className=\"btn btn-danger py-1 px-2 ml-2\">\n                <i className=\"fa fa-trash\"></i>    \n                </button></>\n            })\n        })\n        return data;\n    }\n    // const deleteProductHandler=(id)=>{\n    //    dispatch(deleteProduct(id));\n    // }\n    return (\n        <>\n        <MetaData title={\"All Orders\"}></MetaData>\n        <div className=\"row\">\n          <div className=\"col-12 col-md-2\">\n              <Sidebar/>\n          </div>\n          <div className=\"col-12 col-md-10\">\n                <>\n                <h1 className=\"my-5\">All Orders</h1>\n                {loading?<Loader/>:<>\n                 <MDBDataTable\n         data={setOrders()}\n         className=\"px-3\"\n         bordered\n         striped\n         hover\n     />\n                </>}\n                </>\n          </div>\n        </div>\n        </>\n    )\n}\n\nexport default OrderList\n"]},"metadata":{},"sourceType":"module"}