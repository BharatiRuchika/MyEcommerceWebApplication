{"ast":null,"code":"import React,{useState,useEffect}from'react';import Loader from\"../layouts/loader\";import MetaData from'../layouts/MetaData';import{useAlert}from'react-alert';import{useDispatch,useSelector}from'react-redux';import{getAllUsers,clearErrors,deleteUser}from'../../actions/userActions';import{Link}from'react-router-dom';import Sidebar from'./Sidebar';import{MDBDataTable}from'mdbreact';import{DELETE_USER_RESET}from'../../constants/userConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UsersList=function UsersList(_ref){var history=_ref.history;var alert=useAlert();var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.allUsers;}),loading=_useSelector.loading,error=_useSelector.error,users=_useSelector.users;var _useSelector2=useSelector(function(state){return state.user;}),isDeleted=_useSelector2.isDeleted;var _useSelector3=useSelector(function(state){return state.auth;}),token=_useSelector3.token;// console.log(\"final deleted\",isDeleted);\nuseEffect(function(){// console.log(\"im in useEffect\");\ndispatch(getAllUsers(token));if(error){alert.error(error);dispatch(clearErrors());}if(isDeleted){alert.success('User deleted successfully');history.push('/admin/users');dispatch({type:DELETE_USER_RESET});}},[error,alert,dispatch,isDeleted,history]);var deleteUserHandler=function deleteUserHandler(id){dispatch(deleteUser(id,token));};var setUsers=function setUsers(){var data={columns:[{label:'user ID',field:'id',sort:'asc'},{label:'Name',field:'name',sort:'asc'},{label:'Email',field:'email',sort:'asc'},{label:'Role',field:'role',sort:'asc'},{label:'Actions',field:'actions'}],rows:[]};users.forEach(function(user){data.rows.push({id:user._id,name:user.name,email:user.email,role:user.role,actions:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/admin/user/\".concat(user._id),className:\"btn btn-primary\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-pencil\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return deleteUserHandler(user._id);},className:\"btn btn-danger py-1 px-2 ml-2\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-trash\"})})]})});});return data;};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:'All Users'}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-2\",children:/*#__PURE__*/_jsx(Sidebar,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-10\",children:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"my-5\",children:\"All Users\"}),loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsx(MDBDataTable,{data:setUsers(),className:\"px-3\",bordered:true,striped:true,hover:true})]})})]})]});};export default UsersList;","map":{"version":3,"sources":["/Users/ruchikaashokbharati/Documents/Projects/Ecommerce/Ecommerce-Backend-main/client/src/components/admin/UsersList.js"],"names":["React","useState","useEffect","Loader","MetaData","useAlert","useDispatch","useSelector","getAllUsers","clearErrors","deleteUser","Link","Sidebar","MDBDataTable","DELETE_USER_RESET","UsersList","history","alert","dispatch","state","allUsers","loading","error","users","user","isDeleted","auth","token","success","push","type","deleteUserHandler","id","setUsers","data","columns","label","field","sort","rows","forEach","_id","name","email","role","actions"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react'\nimport Loader from \"../layouts/loader\";\nimport MetaData from '../layouts/MetaData';\nimport { useAlert } from 'react-alert';\nimport { useDispatch,useSelector } from 'react-redux';\nimport { getAllUsers,clearErrors,deleteUser } from '../../actions/userActions';\nimport { Link } from 'react-router-dom';\nimport Sidebar from './Sidebar';\nimport { MDBDataTable } from 'mdbreact'\nimport { DELETE_USER_RESET } from '../../constants/userConstants';\nconst UsersList = ({history}) => {\n    const alert = useAlert();\n    const dispatch = useDispatch();\n    const {loading,error,users} = useSelector(state=>state.allUsers)\n    const { isDeleted } = useSelector(state => state.user);\n    const { token } = useSelector(state => state.auth);\n    // console.log(\"final deleted\",isDeleted);\n    useEffect(() => {\n        // console.log(\"im in useEffect\");\n        dispatch(getAllUsers(token))\n        if(error){\n            alert.error(error);\n            dispatch(clearErrors());\n        }\n    if (isDeleted) {\n        alert.success('User deleted successfully');\n        history.push('/admin/users');\n        dispatch({ type: DELETE_USER_RESET })\n    }\n}, [error,alert,dispatch,isDeleted,history])\nconst deleteUserHandler = (id) => {\n    dispatch(deleteUser(id,token))\n}\n    const setUsers = ()=>{\n      const data = {\n          columns:[\n              {\n                  label:'user ID',\n                  field:'id',\n                  sort:'asc'\n              },{\n                  label:'Name',\n                  field:'name',\n                  sort:'asc'\n              },{\n                label:'Email',\n                field:'email',\n                sort:'asc'\n            },\n            {\n                label:'Role',\n                field:'role',\n                sort:'asc'\n            },\n            {\n                label:'Actions',\n                field:'actions',\n                \n            }\n          ],\n          rows:[\n\n          ]\n        }\n        users.forEach(user=>{\n            data.rows.push({\n                id:user._id,\n                name:user.name,\n                email:user.email,\n                role:user.role,\n                actions:<><Link to={`/admin/user/${user._id}`} className=\"btn btn-primary\">\n                    <i className=\"fa fa-pencil\"></i>\n                </Link>\n                <button onClick={() => deleteUserHandler(user._id)} className=\"btn btn-danger py-1 px-2 ml-2\">\n                <i className=\"fa fa-trash\"></i>    \n                </button></>\n            })\n        })\n        return data;\n    }\n    return (\n        <>\n        <MetaData title={'All Users'} />\n        <div className=\"row\">\n            <div className=\"col-12 col-md-2\">\n                <Sidebar />\n            </div>\n\n            <div className=\"col-12 col-md-10\">\n                <>\n                    <h1 className=\"my-5\">All Users</h1>\n\n                    {loading ? <Loader /> : (\n                        <MDBDataTable\n                            data={setUsers()}\n                            className=\"px-3\"\n                            bordered\n                            striped\n                            hover\n                        />\n                    )}\n\n                </>\n            </div>\n        </div>\n\n    </>\n    )\n}\n\nexport default UsersList\n"]},"metadata":{},"sourceType":"module"}