{"ast":null,"code":"import _slicedToArray from\"/Users/ruchikaashokbharati/Documents/Projects/Ecommerce/Ecommerce-Backend-main/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useAlert}from'react-alert';import{useDispatch,useSelector}from'react-redux';import Loader from\"../layouts/loader\";import MetaData from'../layouts/MetaData';import{Link}from'react-router-dom';import{login,clearErrors}from\"../../actions/userActions\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Login=function Login(_ref){var history=_ref.history,location=_ref.location;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var alert=useAlert();var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.auth;}),isAuthenticated=_useSelector.isAuthenticated,loading=_useSelector.loading,error=_useSelector.error;// console.log(\"location\", location);\nvar redirect=location.search?location.search.split('=')[1]:'/';// console.log(\"redirect\", redirect);\nuseEffect(function(){if(isAuthenticated){history.push(redirect);}// console.log(\"im in login\");\nif(error){// console.log(\"error is true\", error);\nalert.error(error);dispatch(clearErrors());}},[dispatch,alert,isAuthenticated,error,history]);var submitHandler=function submitHandler(e){e.preventDefault();// console.log(\"im in submit handler\");\nconsole.log(email,password);dispatch(login(email,password));};return/*#__PURE__*/_jsx(_Fragment,{children:loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:'Login'}),/*#__PURE__*/_jsx(\"div\",{className:\"row wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-10 col-lg-5\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"shadow-lg\",onSubmit:submitHandler,children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mb-3\",children:\"Login\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email_field\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email_field\",className:\"form-control\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password_field\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password_field\",className:\"form-control\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsx(Link,{to:\"/password/forgot\",className:\"float-right mb-4\",children:\"Forgot Password?\"}),/*#__PURE__*/_jsx(\"button\",{id:\"login_button\",type:\"submit\",className:\"btn btn-block py-3\",children:\"LOGIN\"}),/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"float-right mt-3\",children:\"New User?\"})]})})})]})});};export default Login;","map":{"version":3,"sources":["/Users/ruchikaashokbharati/Documents/Projects/Ecommerce/Ecommerce-Backend-main/client/src/components/user/Login.js"],"names":["React","useEffect","useState","useAlert","useDispatch","useSelector","Loader","MetaData","Link","login","clearErrors","Login","history","location","email","setEmail","password","setPassword","alert","dispatch","state","auth","isAuthenticated","loading","error","redirect","search","split","push","submitHandler","e","preventDefault","console","log","target","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { useAlert } from 'react-alert'\nimport { useDispatch, useSelector } from 'react-redux'\nimport Loader from \"../layouts/loader\";\nimport MetaData from '../layouts/MetaData';\nimport { Link } from 'react-router-dom';\nimport { login, clearErrors } from \"../../actions/userActions\";\nconst Login = ({ history, location }) => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const alert = useAlert();\n  const dispatch = useDispatch();\n  const { isAuthenticated, loading, error } = useSelector(state => state.auth);\n  // console.log(\"location\", location);\n  const redirect = location.search ? location.search.split('=')[1] : '/'\n  // console.log(\"redirect\", redirect);\n\n  useEffect(() => {\n    if (isAuthenticated) {\n      history.push(redirect);\n    }\n    // console.log(\"im in login\");\n    if (error) {\n      // console.log(\"error is true\", error);\n      alert.error(error);\n      dispatch(clearErrors());\n    }\n  }, [dispatch, alert, isAuthenticated, error, history])\n  const submitHandler = (e) => {\n    e.preventDefault();\n    // console.log(\"im in submit handler\");\n    console.log(email, password);\n    dispatch(login(email, password))\n  }\n  return (\n    <>\n      {loading ? <Loader /> : (\n        <>\n          <MetaData title={'Login'} />\n          <div className=\"row wrapper\">\n            <div className=\"col-10 col-lg-5\">\n              <form className=\"shadow-lg\" onSubmit={submitHandler}>\n                <h1 className=\"mb-3\">Login</h1>\n                <div className=\"form-group\">\n                  <label htmlFor=\"email_field\">Email</label>\n                  <input\n                    type=\"email\"\n                    id=\"email_field\"\n                    className=\"form-control\"\n                    value={email}\n                    onChange={(e) => setEmail(e.target.value)}\n                  />\n                </div>\n\n                <div className=\"form-group\">\n                  <label htmlFor=\"password_field\">Password</label>\n                  <input\n                    type=\"password\"\n                    id=\"password_field\"\n                    className=\"form-control\"\n                    value={password}\n                    onChange={(e) => setPassword(e.target.value)}\n                  />\n                </div>\n\n                <Link to=\"/password/forgot\" className=\"float-right mb-4\">Forgot Password?</Link>\n\n                <button\n                  id=\"login_button\"\n                  type=\"submit\"\n                  className=\"btn btn-block py-3\"\n                >\n                  LOGIN\n                </button>\n\n                <Link to=\"/register\" className=\"float-right mt-3\">New User?</Link>\n              </form>\n            </div>\n          </div>\n        </>\n      )}\n    </>\n  )\n}\n\nexport default Login\n"]},"metadata":{},"sourceType":"module"}