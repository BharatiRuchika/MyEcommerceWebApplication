{"ast":null,"code":"import _defineProperty from\"/Users/ruchikaashokbharati/Documents/Projects/Ecommerce/Ecommerce-Backend-main/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/ruchikaashokbharati/Documents/Projects/Ecommerce/Ecommerce-Backend-main/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/ruchikaashokbharati/Documents/Projects/Ecommerce/Ecommerce-Backend-main/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useAlert}from'react-alert';import{useDispatch,useSelector}from'react-redux';import MetaData from'../layouts/MetaData';import{register,clearErrors}from\"../../actions/userActions\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Register=function Register(_ref){var history=_ref.history;var _useState=useState({name:\"\",email:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var name=user.name,email=user.email,password=user.password;var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),avatar=_useState4[0],setAvatar=_useState4[1];var _useState5=useState(\"/images/default_avatar.jpg\"),_useState6=_slicedToArray(_useState5,2),avatarPreview=_useState6[0],setAvatarPreview=_useState6[1];var alert=useAlert();var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.auth;}),isAuthenticated=_useSelector.isAuthenticated,loading=_useSelector.loading,error=_useSelector.error;if(isAuthenticated){alert.success(\"user registered successfully\");history.push(\"/\");}useEffect(function(){if(error){alert.error(error);dispatch(clearErrors());}},[dispatch,alert,isAuthenticated,error,history]);var submitHandler=function submitHandler(e){e.preventDefault();var formData=new FormData();formData.set(\"avatar\",avatarPreview);formData.set(\"name\",name);formData.set(\"email\",email);formData.set(\"password\",password);dispatch(register(formData));};var onChange=function onChange(e){if(e.target.name===\"avatar\"){var reader=new FileReader();console.log(\"image\",e.target.files[0]);reader.readAsDataURL(e.target.files[0]);reader.onload=function(){if(reader.readyState==2){setAvatarPreview(reader.result);setAvatar(reader.result);}};}else{setUser(_objectSpread(_objectSpread({},user),{},_defineProperty({},e.target.name,[e.target.value])));}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:'Register User'}),/*#__PURE__*/_jsx(\"div\",{className:\"row wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-10 col-lg-5\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,className:\"shadow-lg\",encType:\"multipart/form-data\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mb-3\",children:\"Register\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email_field\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"name\",id:\"name_field\",className:\"form-control\",name:\"name\",value:name,onChange:onChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email_field\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email_field\",className:\"form-control\",name:\"email\",value:email,onChange:onChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password_field\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password_field\",className:\"form-control\",name:\"password\",value:password,onChange:onChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"avatar_upload\",children:\"Avatar\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"figure\",{className:\"avatar mr-3 item-rtl\",children:/*#__PURE__*/_jsx(\"img\",{src:avatarPreview,className:\"rounded-circle\",alt:\"Avatar Preview\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"custom-file\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"avatar\",className:\"custom-file-input\",id:\"customFile\",accept:\"images/*\",onChange:onChange}),/*#__PURE__*/_jsx(\"label\",{className:\"custom-file-label\",htmlFor:\"customFile\",children:\"Choose Avatar\"})]})]})]}),/*#__PURE__*/_jsx(\"button\",{id:\"register_button\",type:\"submit\",className:\"btn btn-block py-3\",disabled:loading?true:false,children:\"REGISTER\"})]})})})]});};export default Register;","map":{"version":3,"sources":["/Users/ruchikaashokbharati/Documents/Projects/Ecommerce/Ecommerce-Backend-main/client/src/components/user/Register.js"],"names":["React","useEffect","useState","useAlert","useDispatch","useSelector","MetaData","register","clearErrors","Register","history","name","email","password","user","setUser","avatar","setAvatar","avatarPreview","setAvatarPreview","alert","dispatch","state","auth","isAuthenticated","loading","error","success","push","submitHandler","e","preventDefault","formData","FormData","set","onChange","target","reader","FileReader","console","log","files","readAsDataURL","onload","readyState","result","value"],"mappings":"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","sourcesContent":["import React,{useEffect,useState} from 'react'\nimport { useAlert } from 'react-alert'\nimport { useDispatch,useSelector } from 'react-redux'\nimport MetaData from '../layouts/MetaData';\nimport {register,clearErrors} from \"../../actions/userActions\";\nconst Register = ({history}) => {\n    const [user,setUser] = useState({\n        name:\"\",\n        email:\"\",\n        password:\"\"\n    })\n    const {name,email,password} = user;\n    const [avatar,setAvatar] = useState(\"\");\n    const [avatarPreview,setAvatarPreview] = useState(\"/images/default_avatar.jpg\");\n    const alert = useAlert();\n    const dispatch = useDispatch();\n    const {isAuthenticated,loading,error} = useSelector(state=>state.auth);\n    if(isAuthenticated){\n      alert.success(\"user registered successfully\");\n        history.push(\"/\");\n    }\n    useEffect(() => {\n       if(error){\n           alert.error(error);\n           dispatch(clearErrors());\n       }\n    }, [dispatch,alert,isAuthenticated,error,history])\n    const submitHandler = (e)=>{\n      e.preventDefault();\n      const formData = new FormData();\n      formData.set(\"avatar\",avatarPreview);\n      formData.set(\"name\",name);\n      formData.set(\"email\",email);\n      formData.set(\"password\",password);\n      dispatch(register(formData))\n    }\n    const onChange = e =>{\n        if(e.target.name === \"avatar\"){\n          const reader = new FileReader();\n          console.log(\"image\",e.target.files[0])\n          reader.readAsDataURL(e.target.files[0]);\n          reader.onload = ()=>{\n              if(reader.readyState == 2){\n                  setAvatarPreview(reader.result);\n                  setAvatar(reader.result);\n              }\n          }\n        }else{\n            setUser({...user,[e.target.name]:[e.target.value]})\n        }\n    }\n    return (\n      <>\n      <MetaData title={'Register User'}/>\n      <div className=\"row wrapper\">\n\t\t<div className=\"col-10 col-lg-5\">\n        <form onSubmit={submitHandler} className=\"shadow-lg\" encType='multipart/form-data'>\n            <h1 className=\"mb-3\">Register</h1>\n\n          <div className=\"form-group\">\n            <label htmlFor=\"email_field\">Name</label>\n            <input type=\"name\" id=\"name_field\" className=\"form-control\" name=\"name\" value={name} onChange={onChange} />\n          </div>\n\n            <div className=\"form-group\">\n              <label htmlFor=\"email_field\">Email</label>\n              <input\n                type=\"email\"\n                id=\"email_field\"\n                className=\"form-control\"\n                name=\"email\"\n                value={email}\n                onChange={onChange}\n              />\n            </div>\n  \n            <div className=\"form-group\">\n              <label htmlFor=\"password_field\">Password</label>\n              <input\n                type=\"password\"\n                id=\"password_field\"\n                className=\"form-control\"\n                name=\"password\"\n                value={password}\n                onChange={onChange}\n              />\n            </div>\n\n            <div className='form-group'>\n              <label htmlFor='avatar_upload'>Avatar</label>\n              <div className='d-flex align-items-center'>\n                  <div>\n                      <figure className='avatar mr-3 item-rtl'>\n                          <img\n                              src={avatarPreview}\n                              className='rounded-circle'\n                              alt='Avatar Preview'\n                            />\n                      </figure>\n                  </div>\n                  <div className='custom-file'>\n                      <input\n                          type='file'\n                          name='avatar'\n                          className='custom-file-input'\n                          id='customFile'\n                          accept=\"images/*\"\n                          onChange={onChange}\n                      />\n                      <label className='custom-file-label' htmlFor='customFile'>\n                          Choose Avatar\n                      </label>\n                  </div>\n              </div>\n          </div>\n  \n            <button\n              id=\"register_button\"\n              type=\"submit\"\n              className=\"btn btn-block py-3\"\n              disabled={loading?true:false}\n            >\n              REGISTER\n            </button>\n          </form>\n\t\t  </div>\n          </div>\n      </>\n    )\n}\n\nexport default Register\n"]},"metadata":{},"sourceType":"module"}