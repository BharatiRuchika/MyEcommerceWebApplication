{"ast":null,"code":"import { LOGIN_REQUEST, LOGIN_SUCCESS, LOGIN_FAIL, CLEAR_ERRORS, REGISTER_USER_FAIL, REGISTER_USER_SUCCESS, REGISTER_USER_REQUEST, LOAD_USER_FAIL, LOAD_USER_REQUEST, LOAD_USER_SUCCESS, LOGOUT_FAIL, LOGOUT_SUCCESS, UPDATE_PASSWORD_FAIL, UPDATE_PROFILE_SUCCESS, UPDATE_PASSWORD_REQUEST, UPDATE_PASSWORD_SUCCESS, UPDATE_PROFILE_FAIL, UPDATE_PROFILE_REQUEST, FORGOT_PASSWORD_FAIL, FORGOT_PASSWORD_REQUEST, FORGOT_PASSWORD_SUCCESS, NEW_PASSWORD_FAIL, NEW_PASSWORD_REQUEST, NEW_PASSWORD_SUCCESS, ALL_USERS_SUCCESS, ALL_USERS_REQUEST, ALL_USERS_FAIL, UPDATE_USER_SUCCESS, UPDATE_USER_REQUEST, UPDATE_USER_FAIL, USER_DETAILS_REQUEST, USER_DETAILS_SUCCESS, USER_DETAILS_FAIL, DELETE_USER_FAIL, DELETE_USER_REQUEST, DELETE_USER_SUCCESS } from \"../constants/userConstants\";\nimport { STRIPE_SUCCESS } from \"../constants/stripeConstants\";\nimport { getStripeData } from \"../actions/stripeActions\"; // import { getStripeData} from '../actions/stripeActions';\n\nimport axios from \"axios\";\nimport { useDispatch } from \"react-redux\"; //login\n\nexport const login = (email, password) => async dispatch => {\n  // console.log(\"im in login\");\n  try {\n    dispatch({\n      type: LOGIN_REQUEST\n    });\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    const {\n      data\n    } = await axios.post(\"http://localhost:3001/auth/login\", {\n      email,\n      password\n    }, config); // console.log(\"loginuserdata\",data);\n\n    dispatch({\n      type: LOGIN_SUCCESS,\n      payload: data.user\n    });\n    dispatch({\n      type: \"AUTH\",\n      payload: {\n        token: data.token\n      }\n    });\n    dispatch({\n      type: STRIPE_SUCCESS,\n      payload: data.token\n    }); // dispatch({type:\"STRIPE_SUCCESS\"});\n\n    getStripeData();\n  } catch (error) {\n    //    console.log(\"im in login catch\");\n    //    console.log(\"error\",error.response.data.errMessage);\n    dispatch({\n      type: LOGIN_FAIL,\n      payload: error.response.data.errMessage\n    });\n  }\n}; //register user\n\nexport const register = userData => async dispatch => {\n  // console.log(\"im in register\");\n  try {\n    dispatch({\n      type: REGISTER_USER_REQUEST\n    });\n    const config = {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    };\n    const {\n      data\n    } = await axios.post(\"http://localhost:3001/auth/register\", userData, config); //  console.log(\"registerdata\",data);\n\n    dispatch({\n      type: REGISTER_USER_SUCCESS,\n      payload: data.user\n    });\n  } catch (error) {\n    console.log(\"error\", error.response);\n    dispatch({\n      type: REGISTER_USER_FAIL,\n      payload: error.response.data.errMessage\n    });\n  }\n}; //load user\n\nexport const loadUser = () => async dispatch => {\n  //  console.log(\"im in load user\");\n  try {\n    dispatch({\n      type: LOAD_USER_REQUEST\n    });\n    const {\n      data\n    } = await axios.get(\"http://localhost:3001/auth/me\"); //  console.log(\"loaduserdata\",data);\n    //  console.log(\"stripeApiKey\",stripeApiKey);\n    //  const {stripeData} = await axios.get(\"http://localhost:3001/user/payment/stripeApi\");\n    //  console.log(\"stripeData\",stripeData)\n    //  setStripeApiKey(stripeData.stripeApiKey);\n\n    dispatch({\n      type: LOAD_USER_SUCCESS,\n      payload: data.user\n    }); // }\n  } catch (error) {\n    //   console.log(\"Error\",error);\n    dispatch({\n      type: LOAD_USER_FAIL,\n      payload: error.response.data.errMessage\n    });\n  }\n}; //logout user\n\nexport const logoutUser = () => async dispatch => {\n  // console.log(\"im in load user\");\n  try {\n    const {\n      data\n    } = await axios.get(\"http://localhost:3001/auth/logout\"); // console.log(\"logoutuserdata\",data);\n\n    dispatch({\n      type: LOGOUT_SUCCESS\n    });\n  } catch (error) {\n    // console.log(\"logouterrpr\",error);\n    dispatch({\n      type: LOGOUT_FAIL,\n      payload: error.response.data.errMessage\n    });\n  }\n}; //register user\n\nexport const updateProfile = userData => async dispatch => {\n  // console.log(\"im in register\");\n  try {\n    dispatch({\n      type: UPDATE_PROFILE_REQUEST\n    });\n    const config = {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    };\n    const {\n      data\n    } = await axios.put(\"http://localhost:3001/auth/me/update\", userData, config); //  console.log(\"userdata\",data);\n\n    dispatch({\n      type: UPDATE_PROFILE_SUCCESS,\n      payload: data.success\n    });\n  } catch (error) {\n    dispatch({\n      type: UPDATE_PROFILE_FAIL,\n      payload: error.response.data.errMessage\n    });\n  }\n}; //update password\n\nexport const updatePassword = passwords => async dispatch => {\n  // console.log(\"im in update password\");\n  try {\n    dispatch({\n      type: UPDATE_PASSWORD_REQUEST\n    });\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    const {\n      data\n    } = await axios.put(\"http://localhost:3001/auth/password/updatepassword\", passwords, config); //  console.log(\"userdata\",data);\n\n    dispatch({\n      type: UPDATE_PASSWORD_SUCCESS,\n      payload: data.success\n    });\n  } catch (error) {\n    // console.log(\"error\",error.response);\n    dispatch({\n      type: UPDATE_PASSWORD_FAIL,\n      payload: error.response.data.errMessage\n    });\n  }\n}; //reset password\n\nexport const resetPassword = (token, passwords) => async dispatch => {\n  // console.log(\"im in new password\");\n  try {\n    dispatch({\n      type: NEW_PASSWORD_REQUEST\n    });\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    const {\n      data\n    } = await axios.put(`http://localhost:3001/auth/password/reset/${token}`, passwords, config); //  console.log(\"userdata\",data);\n\n    dispatch({\n      type: NEW_PASSWORD_SUCCESS,\n      payload: data.success\n    });\n  } catch (error) {\n    // console.log(\"error\",error.response);\n    dispatch({\n      type: NEW_PASSWORD_FAIL,\n      payload: error.response.data.errMessage\n    });\n  }\n}; //forgot password\n\nexport const forgotPassword = email => async dispatch => {\n  // console.log(\"im in forgot password\");\n  // console.log(\"email\",email);\n  try {\n    dispatch({\n      type: FORGOT_PASSWORD_REQUEST\n    });\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    const {\n      data\n    } = await axios.post(\"http://localhost:3001/auth/password/forgot\", email, config); //  console.log(\"userdata\",data);\n\n    dispatch({\n      type: FORGOT_PASSWORD_SUCCESS,\n      payload: data.message\n    });\n  } catch (error) {\n    // console.log(\"error\",error.response);\n    dispatch({\n      type: FORGOT_PASSWORD_FAIL,\n      payload: error.response.data.errMessage\n    });\n  }\n};\nexport const getAllUsers = () => async dispatch => {\n  // console.log(\"im in get users\");\n  try {\n    dispatch({\n      type: ALL_USERS_REQUEST\n    });\n    const {\n      data\n    } = await axios.get(\"http://localhost:3001/auth/admin/users\"); // console.log(\"Allusersdata\",data);\n\n    dispatch({\n      type: ALL_USERS_SUCCESS,\n      payload: data.users\n    }); // }\n  } catch (error) {\n    //    console.log(\"im in cathc\");\n    //    console.log(\"error\",error);\n    dispatch({\n      type: ALL_USERS_FAIL,\n      payload: error.response.data.errMessage\n    });\n  }\n};\nexport const updateUser = (id, userData) => async dispatch => {\n  try {\n    dispatch({\n      type: UPDATE_USER_REQUEST\n    });\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    const {\n      data\n    } = await axios.put(`http://localhost:3001/auth/admin/user/${id}`, userData, config);\n    dispatch({\n      type: UPDATE_USER_SUCCESS,\n      payload: data.success\n    });\n  } catch (error) {\n    dispatch({\n      type: UPDATE_USER_FAIL,\n      payload: error.response.data.errMessage\n    });\n  }\n};\nexport const getUserDetails = id => async dispatch => {\n  try {\n    dispatch({\n      type: USER_DETAILS_REQUEST\n    });\n    const {\n      data\n    } = await axios.get(`http://localhost:3001/auth/admin/user/${id}`);\n    dispatch({\n      type: USER_DETAILS_SUCCESS,\n      payload: data.user\n    });\n  } catch (error) {\n    dispatch({\n      type: USER_DETAILS_FAIL,\n      payload: error.response.data.errMessage\n    });\n  }\n}; // Delete user - ADMIN\n\nexport const deleteUser = id => async dispatch => {\n  // console.log(\"im in delete user\")\n  // console.log(\"id\",id);\n  try {\n    dispatch({\n      type: DELETE_USER_REQUEST\n    });\n    const {\n      data\n    } = await axios.delete(`http://localhost:3001/auth/admin/user/${id}`);\n    console.log(\"deleteData\", data);\n    dispatch({\n      type: DELETE_USER_SUCCESS,\n      payload: data.success\n    });\n  } catch (error) {\n    dispatch({\n      type: DELETE_USER_FAIL,\n      payload: error.response.data.errMessage\n    });\n  }\n}; //clear error\n\nexport const clearErrors = () => async dispatch => {\n  dispatch({\n    type: CLEAR_ERRORS\n  });\n};","map":{"version":3,"sources":["/Users/ruchikaashokbharati/Documents/Projects/Ecommerce1/Ecommerce-Backend-main/client/src/actions/userActions.js"],"names":["LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_FAIL","CLEAR_ERRORS","REGISTER_USER_FAIL","REGISTER_USER_SUCCESS","REGISTER_USER_REQUEST","LOAD_USER_FAIL","LOAD_USER_REQUEST","LOAD_USER_SUCCESS","LOGOUT_FAIL","LOGOUT_SUCCESS","UPDATE_PASSWORD_FAIL","UPDATE_PROFILE_SUCCESS","UPDATE_PASSWORD_REQUEST","UPDATE_PASSWORD_SUCCESS","UPDATE_PROFILE_FAIL","UPDATE_PROFILE_REQUEST","FORGOT_PASSWORD_FAIL","FORGOT_PASSWORD_REQUEST","FORGOT_PASSWORD_SUCCESS","NEW_PASSWORD_FAIL","NEW_PASSWORD_REQUEST","NEW_PASSWORD_SUCCESS","ALL_USERS_SUCCESS","ALL_USERS_REQUEST","ALL_USERS_FAIL","UPDATE_USER_SUCCESS","UPDATE_USER_REQUEST","UPDATE_USER_FAIL","USER_DETAILS_REQUEST","USER_DETAILS_SUCCESS","USER_DETAILS_FAIL","DELETE_USER_FAIL","DELETE_USER_REQUEST","DELETE_USER_SUCCESS","STRIPE_SUCCESS","getStripeData","axios","useDispatch","login","email","password","dispatch","type","config","headers","data","post","payload","user","token","error","response","errMessage","register","userData","console","log","loadUser","get","logoutUser","updateProfile","put","success","updatePassword","passwords","resetPassword","forgotPassword","message","getAllUsers","users","updateUser","id","getUserDetails","deleteUser","delete","clearErrors"],"mappings":"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","sourcesContent":["import {LOGIN_REQUEST,LOGIN_SUCCESS,LOGIN_FAIL,CLEAR_ERRORS,REGISTER_USER_FAIL,REGISTER_USER_SUCCESS,REGISTER_USER_REQUEST,\nLOAD_USER_FAIL,LOAD_USER_REQUEST,LOAD_USER_SUCCESS,LOGOUT_FAIL,LOGOUT_SUCCESS,\nUPDATE_PASSWORD_FAIL,UPDATE_PROFILE_SUCCESS,UPDATE_PASSWORD_REQUEST,UPDATE_PASSWORD_SUCCESS,UPDATE_PROFILE_FAIL,UPDATE_PROFILE_REQUEST,\nFORGOT_PASSWORD_FAIL,\nFORGOT_PASSWORD_REQUEST,\nFORGOT_PASSWORD_SUCCESS,\nNEW_PASSWORD_FAIL,\nNEW_PASSWORD_REQUEST,\nNEW_PASSWORD_SUCCESS,\nALL_USERS_SUCCESS,\nALL_USERS_REQUEST,\nALL_USERS_FAIL,\nUPDATE_USER_SUCCESS,\nUPDATE_USER_REQUEST,\nUPDATE_USER_FAIL,\nUSER_DETAILS_REQUEST,\nUSER_DETAILS_SUCCESS,\nUSER_DETAILS_FAIL,\nDELETE_USER_FAIL,\nDELETE_USER_REQUEST,\nDELETE_USER_SUCCESS\n} from \"../constants/userConstants\";\nimport { STRIPE_SUCCESS } from \"../constants/stripeConstants\";\nimport { getStripeData } from \"../actions/stripeActions\";\n// import { getStripeData} from '../actions/stripeActions';\nimport axios from \"axios\";\nimport { useDispatch } from \"react-redux\";\n//login\nexport const login = (email,password)=>async(dispatch)=>{\n    \n    // console.log(\"im in login\");\n   try{\n     dispatch({\n         type:LOGIN_REQUEST\n    })\n    const config={\n      headers:{\n          'Content-Type':'application/json'\n      }\n    }\nconst {data} = await axios.post(\"http://localhost:3001/auth/login\",{email,password},config)\n// console.log(\"loginuserdata\",data);\ndispatch({\n    type:LOGIN_SUCCESS,\n    payload:data.user\n})\ndispatch({\n    type: \"AUTH\",\n    payload: { token: data.token },\n  });\n  dispatch({type:STRIPE_SUCCESS,payload:data.token})\n// dispatch({type:\"STRIPE_SUCCESS\"});\ngetStripeData()\n   }catch(error){\n    //    console.log(\"im in login catch\");\n    //    console.log(\"error\",error.response.data.errMessage);\n    dispatch({\n        type:LOGIN_FAIL,\n        payload:error.response.data.errMessage\n    })\n   }\n}\n\n//register user\nexport const register = (userData)=>async(dispatch)=>{\n    // console.log(\"im in register\");\n    try{\n      dispatch({\n          type:REGISTER_USER_REQUEST\n     })\n     const config={\n       headers:{\n           'Content-Type':'multipart/form-data'\n       }\n     }\n const {data} = await axios.post(\"http://localhost:3001/auth/register\",userData,config)\n//  console.log(\"registerdata\",data);\n dispatch({\n     type:REGISTER_USER_SUCCESS,\n     payload:data.user\n })\n \n    }catch(error){\n        console.log(\"error\",error.response);\n     dispatch({\n         type:REGISTER_USER_FAIL,\n         payload:error.response.data.errMessage\n     })\n    }\n }\n\n //load user\n export const loadUser = ()=>async(dispatch)=>{\n    //  console.log(\"im in load user\");\n    try{\n      dispatch({\n          type:LOAD_USER_REQUEST\n     })\n    \n const {data} = await axios.get(\"http://localhost:3001/auth/me\");\n//  console.log(\"loaduserdata\",data);\n//  console.log(\"stripeApiKey\",stripeApiKey);\n//  const {stripeData} = await axios.get(\"http://localhost:3001/user/payment/stripeApi\");\n//  console.log(\"stripeData\",stripeData)\n//  setStripeApiKey(stripeData.stripeApiKey);\n dispatch({\n     type:LOAD_USER_SUCCESS,\n     payload:data.user\n })\n// }\n    }catch(error){\n    //   console.log(\"Error\",error);\n     dispatch({\n         type:LOAD_USER_FAIL,\n         payload:error.response.data.errMessage\n     })\n    }\n }\n\n //logout user\n export const logoutUser = ()=>async(dispatch)=>{\n    // console.log(\"im in load user\");\n   try{\n  const {data} = await axios.get(\"http://localhost:3001/auth/logout\");\n// console.log(\"logoutuserdata\",data);\ndispatch({\n    type:LOGOUT_SUCCESS\n})\n}catch(error){\n    // console.log(\"logouterrpr\",error);\n    dispatch({\n        type:LOGOUT_FAIL,\n        payload:error.response.data.errMessage\n    })\n   }\n}\n\n//register user\nexport const updateProfile = (userData)=>async(dispatch)=>{\n    // console.log(\"im in register\");\n    try{\n      dispatch({\n          type:UPDATE_PROFILE_REQUEST\n     })\n     const config={\n       headers:{\n           'Content-Type':'multipart/form-data'\n       }\n     }\n const {data} = await axios.put(\"http://localhost:3001/auth/me/update\",userData,config)\n//  console.log(\"userdata\",data);\n dispatch({\n     type:UPDATE_PROFILE_SUCCESS,\n     payload:data.success\n })\n \n    }catch(error){\n     dispatch({\n         type:UPDATE_PROFILE_FAIL,\n         payload:error.response.data.errMessage\n     })\n    }\n }\n\n//update password\nexport const updatePassword = (passwords)=>async(dispatch)=>{\n    // console.log(\"im in update password\");\n    try{\n      dispatch({\n          type:UPDATE_PASSWORD_REQUEST\n     })\n     const config={\n       headers:{\n           'Content-Type':'application/json'\n       }\n     }\n const {data} = await axios.put(\"http://localhost:3001/auth/password/updatepassword\",passwords,config)\n//  console.log(\"userdata\",data);\n dispatch({\n     type:UPDATE_PASSWORD_SUCCESS,\n     payload:data.success\n })\n \n    }catch(error){\n        // console.log(\"error\",error.response);\n     dispatch({\n         type:UPDATE_PASSWORD_FAIL,\n         payload:error.response.data.errMessage\n     })\n    }\n }\n\n //reset password\n export const resetPassword = (token,passwords)=>async(dispatch)=>{\n    // console.log(\"im in new password\");\n    try{\n      dispatch({\n          type:NEW_PASSWORD_REQUEST\n     })\n     const config={\n       headers:{\n           'Content-Type':'application/json'\n       }\n     }\n const {data} = await axios.put(`http://localhost:3001/auth/password/reset/${token}`,passwords,config)\n//  console.log(\"userdata\",data);\n dispatch({\n     type:NEW_PASSWORD_SUCCESS,\n     payload:data.success\n })\n \n    }catch(error){\n        // console.log(\"error\",error.response);\n     dispatch({\n         type:NEW_PASSWORD_FAIL,\n         payload:error.response.data.errMessage\n     })\n    }\n }\n\n  //forgot password\n  export const forgotPassword = (email)=>async(dispatch)=>{\n    // console.log(\"im in forgot password\");\n    // console.log(\"email\",email);\n    try{\n      dispatch({\n          type:FORGOT_PASSWORD_REQUEST\n     })\n     const config={\n       headers:{\n           'Content-Type':'application/json'\n       }\n     }\n const {data} = await axios.post(\"http://localhost:3001/auth/password/forgot\",email,config)\n//  console.log(\"userdata\",data);\n dispatch({\n     type:FORGOT_PASSWORD_SUCCESS,\n     payload:data.message\n })\n \n    }catch(error){\n        // console.log(\"error\",error.response);\n     dispatch({\n         type:FORGOT_PASSWORD_FAIL,\n         payload:error.response.data.errMessage\n     })\n    }\n }\n\n export const getAllUsers = ()=>async(dispatch)=>{\n    // console.log(\"im in get users\");\n   try{\n     dispatch({\n         type:ALL_USERS_REQUEST\n    })\n   \nconst {data} = await axios.get(\"http://localhost:3001/auth/admin/users\");\n// console.log(\"Allusersdata\",data);\n\ndispatch({\n    type:ALL_USERS_SUCCESS,\n    payload:data.users\n})\n// }\n   }catch(error){\n    //    console.log(\"im in cathc\");\n    //    console.log(\"error\",error);\n    dispatch({\n        type:ALL_USERS_FAIL,\n        payload:error.response.data.errMessage\n    })\n   }\n}\n\n\nexport const updateUser = (id, userData) => async (dispatch) => {\n    try {\n\n        dispatch({ type: UPDATE_USER_REQUEST })\n\n        const config = {\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        }\n\n        const { data } = await axios.put(`http://localhost:3001/auth/admin/user/${id}`, userData, config)\n\n        dispatch({\n            type: UPDATE_USER_SUCCESS,\n            payload: data.success\n        })\n\n    } catch (error) {\n        dispatch({\n            type: UPDATE_USER_FAIL,\n            payload: error.response.data.errMessage\n        })\n    }\n}\n\nexport const getUserDetails = (id) => async (dispatch) => {\n    try {\n\n    dispatch({ type: USER_DETAILS_REQUEST })\n const { data } = await axios.get(`http://localhost:3001/auth/admin/user/${id}`)\n\n        dispatch({\n            type: USER_DETAILS_SUCCESS,\n            payload: data.user\n        })\n\n    } catch (error) {\n        dispatch({\n            type: USER_DETAILS_FAIL,\n            payload: error.response.data.errMessage\n        })\n    }\n}\n\n// Delete user - ADMIN\nexport const deleteUser = (id) => async (dispatch) => {\n    // console.log(\"im in delete user\")\n    // console.log(\"id\",id);\n    try {\n\n dispatch({ type: DELETE_USER_REQUEST })\n  const { data } = await axios.delete(`http://localhost:3001/auth/admin/user/${id}`);\n  console.log(\"deleteData\",data);  \n  dispatch({\n            type: DELETE_USER_SUCCESS,\n            payload: data.success\n        })\n\n    } catch (error) {\n        dispatch({\n            type: DELETE_USER_FAIL,\n            payload: error.response.data.errMessage\n        })\n    }\n}\n//clear error\nexport const clearErrors = ()=>async(dispatch)=>{\n    dispatch({\n        type:CLEAR_ERRORS\n    })\n }"]},"metadata":{},"sourceType":"module"}