{"ast":null,"code":"import _slicedToArray from\"/Users/ruchikaashokbharati/Documents/Projects/Ecommerce/Ecommerce-Backend-main/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useAlert}from'react-alert';import{useDispatch,useSelector}from'react-redux';import Loader from\"../layouts/loader\";import MetaData from'../layouts/MetaData';import{Link}from'react-router-dom';import{updatePassword,loadUser,clearErrors}from\"../../actions/userActions\";import{UPDATE_PASSWORD_RESET}from'../../constants/userConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var UpdatePassword=function UpdatePassword(_ref){var history=_ref.history;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),oldPassword=_useState2[0],setOldPassword=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),newPassword=_useState4[0],setNewPassword=_useState4[1];var alert=useAlert();var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.auth;}),user=_useSelector.user;var _useSelector2=useSelector(function(state){return state.user;}),isUpdated=_useSelector2.isUpdated,loading=_useSelector2.loading,error=_useSelector2.error;useEffect(function(){if(error){alert.error(error);dispatch(clearErrors());}if(isUpdated){alert.success(\"password updated successfully\");history.push(\"/me\");dispatch({type:UPDATE_PASSWORD_RESET});}},[dispatch,alert,isUpdated,error,history]);var submitHandler=function submitHandler(e){e.preventDefault();var formData=new FormData();formData.set(\"oldPassword\",oldPassword);formData.set(\"newPassword\",newPassword);dispatch(updatePassword(formData));};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:'change password'}),/*#__PURE__*/_jsx(\"div\",{className:\"row wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-10 col-lg-5\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,className:\"shadow-lg\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mt-2 mb-5\",children:\"Update Password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"old_password_field\",children:\"Old Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"old_password_field\",className:\"form-control\",value:oldPassword,onChange:function onChange(e){return setOldPassword(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"new_password_field\",children:\"New Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"new_password_field\",className:\"form-control\",value:newPassword,onChange:function onChange(e){return setNewPassword(e.target.value);}})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading?true:false,className:\"btn update-btn btn-block mt-4 mb-3\",children:\"Update Password\"})]})})})]});};export default UpdatePassword;","map":{"version":3,"sources":["/Users/ruchikaashokbharati/Documents/Projects/Ecommerce/Ecommerce-Backend-main/client/src/components/user/UpdatePassword.js"],"names":["React","useEffect","useState","useAlert","useDispatch","useSelector","Loader","MetaData","Link","updatePassword","loadUser","clearErrors","UPDATE_PASSWORD_RESET","UpdatePassword","history","oldPassword","setOldPassword","newPassword","setNewPassword","alert","dispatch","state","auth","user","isUpdated","loading","error","success","push","type","submitHandler","e","preventDefault","formData","FormData","set","target","value"],"mappings":"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","sourcesContent":["import React,{useEffect,useState} from 'react'\nimport { useAlert } from 'react-alert'\nimport { useDispatch,useSelector } from 'react-redux'\nimport Loader from \"../layouts/loader\";\nimport MetaData from '../layouts/MetaData';\nimport {Link} from 'react-router-dom';\nimport {updatePassword,loadUser,clearErrors} from \"../../actions/userActions\";\nimport { UPDATE_PASSWORD_RESET } from '../../constants/userConstants';\n\nconst UpdatePassword = ({history}) => {\nconst [oldPassword,setOldPassword] = useState('');\nconst [newPassword,setNewPassword] = useState('');\n\nconst alert = useAlert();\nconst dispatch = useDispatch();\nconst {user} = useSelector(state=>state.auth);\nconst {isUpdated,loading,error} = useSelector(state=>state.user);\n\nuseEffect(() => {\n   if(error){\n       alert.error(error);\n       dispatch(clearErrors());\n   }\n   if(isUpdated){\n       alert.success(\"password updated successfully\");\n       \n       history.push(\"/me\");\n       dispatch({\n           type:UPDATE_PASSWORD_RESET\n       })\n   }\n}, [dispatch,alert,isUpdated,error,history])\nconst submitHandler = (e)=>{\n e.preventDefault();\n const formData = new FormData();\n \n formData.set(\"oldPassword\",oldPassword);\n formData.set(\"newPassword\",newPassword);\n\n \n dispatch(updatePassword(formData))\n}\n\n\n    return (\n       <>\n       <MetaData title={'change password'}></MetaData>\n       <div className=\"row wrapper\">\n                <div className=\"col-10 col-lg-5\">\n                    <form onSubmit={submitHandler} className=\"shadow-lg\">\n                        <h1 className=\"mt-2 mb-5\">Update Password</h1>\n                        <div className=\"form-group\">\n                            <label htmlFor=\"old_password_field\">Old Password</label>\n                            <input\n                                type=\"password\"\n                                id=\"old_password_field\"\n                                className=\"form-control\"\n                                value={oldPassword}\n                                onChange={(e)=>setOldPassword(e.target.value)}\n                            />\n                        </div>\n\n                        <div className=\"form-group\">\n                            <label htmlFor=\"new_password_field\">New Password</label>\n                            <input\n                                type=\"password\"\n                                id=\"new_password_field\"\n                                className=\"form-control\"\n                                value={newPassword}\n                                onChange={(e)=>setNewPassword(e.target.value)}\n                            />\n                             </div>\n\n<button type=\"submit\" disabled={loading?true:false}className=\"btn update-btn btn-block mt-4 mb-3\">Update Password</button>\n</form>\n</div>\n</div>\n       </>\n    )\n}\n\nexport default UpdatePassword\n"]},"metadata":{},"sourceType":"module"}