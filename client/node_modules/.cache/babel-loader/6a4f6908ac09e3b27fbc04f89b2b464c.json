{"ast":null,"code":"import React,{useState,useEffect}from'react';import Loader from\"../layouts/loader\";import MetaData from'../layouts/MetaData';import{useAlert}from'react-alert';import{useDispatch,useSelector}from'react-redux';import{getAdminProducts,clearErrors,deleteProduct}from'../../actions/productActions';import{MDBDataTable}from'mdbreact';import{Link}from'react-router-dom';import{Button}from'react-bootstrap';import Sidebar from'./Sidebar';import{DELETE_PRODUCT_RESET}from'../../constants/productConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProductList=function ProductList(_ref){var history=_ref.history;var alert=useAlert();var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.products;}),loading=_useSelector.loading,error=_useSelector.error,products=_useSelector.products;var _useSelector2=useSelector(function(state){return state.deleteProduct;}),deleteError=_useSelector2.error,isDeleted=_useSelector2.isDeleted;useEffect(function(){// console.log(\"im in useEffect\");\ndispatch(getAdminProducts());if(error){alert.error(error);dispatch(clearErrors());}if(deleteError){alert.error(deleteError);dispatch(clearErrors());}if(isDeleted){alert.success(\"Product Deleted Successfully\");dispatch({type:DELETE_PRODUCT_RESET});history.push(\"/admin/products\");}//    console.log(\"im in list orders\");\n},[error,alert,dispatch,deleteError,history,isDeleted]);var setProducts=function setProducts(){var data={columns:[{label:'ID',field:'id',sort:'asc'},{label:'Name',field:'name',sort:'asc'},{label:'Price',field:'price',sort:'asc'},{label:'Stock',field:'stock',sort:'asc'},{label:'Actions',field:'actions'}],rows:[]};products.forEach(function(product){data.rows.push({id:product._id,name:product.name,price:\"$\".concat(product.price),stock:product.stock,status:product.productStatus&&String(product.productStatus).includes(\"Delivered\")?/*#__PURE__*/_jsx(\"p\",{style:{color:\"green\"},children:product.productStatus}):/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:product.productStatus}),actions:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/admin/product/\".concat(product._id),className:\"btn btn-primary\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-pencil\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return deleteProductHandler(product._id);},className:\"btn btn-danger py-1 px-2 ml-2\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-trash\"})})]})});});return data;};var deleteProductHandler=function deleteProductHandler(id){// console.log(\"im in delete product handler\");\n// console.log(\"id\",id);\ndispatch(deleteProduct(id));};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:\"All Products\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-2\",children:/*#__PURE__*/_jsx(Sidebar,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-10\",children:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"my-5\",children:\"All Products\"}),loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(MDBDataTable,{data:setProducts(),className:\"px-3\",bordered:true,striped:true,hover:true})})]})})]})]});};export default ProductList;","map":{"version":3,"sources":["/Users/ruchikaashokbharati/Documents/Projects/Ecommerce/Ecommerce-Backend-main/client/src/components/admin/ProductList.js"],"names":["React","useState","useEffect","Loader","MetaData","useAlert","useDispatch","useSelector","getAdminProducts","clearErrors","deleteProduct","MDBDataTable","Link","Button","Sidebar","DELETE_PRODUCT_RESET","ProductList","history","alert","dispatch","state","products","loading","error","deleteError","isDeleted","success","type","push","setProducts","data","columns","label","field","sort","rows","forEach","product","id","_id","name","price","stock","status","productStatus","String","includes","color","actions","deleteProductHandler"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react'\nimport Loader from \"../layouts/loader\";\nimport MetaData from '../layouts/MetaData';\nimport { useAlert } from 'react-alert';\nimport { useDispatch,useSelector } from 'react-redux';\nimport { getAdminProducts,clearErrors,deleteProduct } from '../../actions/productActions';\nimport { MDBDataTable } from 'mdbreact'\nimport { Link } from 'react-router-dom';\nimport { Button } from 'react-bootstrap';\nimport Sidebar from './Sidebar';\nimport { DELETE_PRODUCT_RESET } from '../../constants/productConstants';\nconst ProductList = ({history}) => {\n    const alert = useAlert();\n    const dispatch = useDispatch();\n    const {loading,error,products} = useSelector(state=>state.products)\n    const {error:deleteError,isDeleted} = useSelector(state=>state.deleteProduct)\n    useEffect(() => {\n        // console.log(\"im in useEffect\");\n       dispatch(getAdminProducts())\n       if(error){\n        alert.error(error);\n        dispatch(clearErrors());\n    }\n     if(deleteError){\n       alert.error(deleteError);\n       dispatch(clearErrors());\n     }\n     if(isDeleted){\n      alert.success(\"Product Deleted Successfully\");\n      dispatch({type:DELETE_PRODUCT_RESET});\n      history.push(\"/admin/products\");\n     }\n    //    console.log(\"im in list orders\");\n    }, [error,alert,dispatch,deleteError,history,isDeleted])\n    \n    const setProducts = ()=>{\n      const data = {\n          columns:[\n              {\n                  label:'ID',\n                  field:'id',\n                  sort:'asc'\n              },{\n                  label:'Name',\n                  field:'name',\n                  sort:'asc'\n              },{\n                label:'Price',\n                field:'price',\n                sort:'asc'\n            },\n            {\n                label:'Stock',\n                field:'stock',\n                sort:'asc'\n            },\n            {\n                label:'Actions',\n                field:'actions',\n                \n            }\n          ],\n          rows:[\n\n          ]\n        }\n        products.forEach(product=>{\n            data.rows.push({\n                id:product._id,\n                name:product.name,\n                price:`$${product.price}`,\n                stock:product.stock,\n                status:product.productStatus && String(product.productStatus).includes(\"Delivered\")?\n                <p style={{color:\"green\"}}>{product.productStatus}</p>:\n                <p style={{color:\"red\"}}>{product.productStatus}</p>,\n                actions:<><Link to={`/admin/product/${product._id}`} className=\"btn btn-primary\">\n                    <i className=\"fa fa-pencil\"></i>\n                </Link>\n                <button onClick={()=>deleteProductHandler(product._id)} className=\"btn btn-danger py-1 px-2 ml-2\">\n                <i className=\"fa fa-trash\"></i>    \n                </button></>\n            })\n        })\n        return data;\n    }\n    const deleteProductHandler=(id)=>{\n        // console.log(\"im in delete product handler\");\n        // console.log(\"id\",id);\n       dispatch(deleteProduct(id));\n    }\n    return (\n       <>\n       <MetaData title={\"All Products\"}></MetaData>\n       <div className=\"row\">\n         <div className=\"col-12 col-md-2\">\n             <Sidebar/>\n         </div>\n         <div className=\"col-12 col-md-10\">\n               <>\n               <h1 className=\"my-5\">All Products</h1>\n               {loading?<Loader/>:<>\n                <MDBDataTable\n        data={setProducts()}\n        className=\"px-3\"\n        bordered\n        striped\n        hover\n    />\n               </>}\n               </>\n         </div>\n       </div>\n       </>\n    )\n}\n\nexport default ProductList\n"]},"metadata":{},"sourceType":"module"}